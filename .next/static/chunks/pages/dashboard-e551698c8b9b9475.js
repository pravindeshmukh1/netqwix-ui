(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8026],{98310:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return l(4993)}])},4993:function(e,t,l){"use strict";let n,i,s,a,o;l.r(t),l.d(t,{default:function(){return pages_dashboard}});var r=l(85893),c=l(67294),d=l(93970),m=l(37392),u=l(33269),h=l(32804),v=l(68800),x=l(23665),g=l(9198),p=l.n(g),f=l(30381),j=l.n(f);l(32949);var b=l(82106),y=l(21190),N=l(29358),_=l(79862),C=l(35510),w=l(81051),S=l(46066),trainerSlider=e=>{let{list:t}=e;return(0,r.jsxs)("div",{className:"recent-slider slider-container recent-chat",children:[(0,r.jsx)(S.Z,{autoplay:!0,infinite:!0,speed:2e3,slidesToShow:3,slidesToScroll:1,swipetoslide:!0,autoplaySpeed:1e3,responsive:[{breakpoint:1366,settings:{autoplay:!0,slidesToShow:3,slidesToScroll:1}},{breakpoint:800,settings:{autoplay:!0,slidesToShow:7}},{breakpoint:768,settings:{autoplay:!0,slidesToShow:5}},{breakpoint:700,settings:{autoplay:!0,slidesToShow:1}}],children:t.map((e,t)=>(0,r.jsx)("div",{className:"item",children:(0,r.jsxs)("div",{className:"recent-box",children:[(0,r.jsx)("div",{className:"dot-btn dot-danger grow"}),(0,r.jsx)("div",{className:"recent-profile",style:{backgroundImage:"url(".concat(e.background_image,")"),backgroundSize:"cover",backgroundPosition:"center",display:"block"},children:(0,r.jsxs)("h6",{children:[" ",e.name]})})]})},"slider-".concat(e.id,"-").concat(t)))}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{})]})},I=l(15611),T=l(78268),k=l(17980),R=l(45538),E=l(16517),A=l(30614),O=l(16933),D=l(82371),P=l(12575),M=l(97125),F=l(31666),L=l(87261),Z=l(3126),H=l(9473),V=l(26463),J=l(40959);let TrainerDetails=e=>{let{onClose:t,element:l,trainerInfo:n,selectTrainer:i,selectOption:s,searchQuery:a,categoryList:o}=e,d=(0,H.I0)(),{getTraineeSlots:m}=(0,h.CG)(N.F),{handleTrainerAvailable:u}=V.commonAction,[v,x]=(0,c.useState)({}),[g,p]=(0,c.useState)({date:null,day:null,time:null}),[f,j]=(0,c.useState)({}),[b,y]=(0,c.useState)({_id:null,select_trainer:!1}),[_,C]=(0,c.useState)({teaching_style:null,credentials_and_affiliations:null,curriculum:null});(0,c.useEffect)(()=>{n&&n.extraInfo&&x(n.extraInfo),n&&!n.isCategory&&(y(e=>({...e,_id:n&&n.id,select_trainer:!0})),i(n&&n._id))},[n]),(0,c.useEffect)(()=>{let e=n?n.name:a;if(g.day||g.time){let t={time:g.time,day:g.day,search:e};d((0,N.Vt)(t)),console.log("searchQuery --- ",e,g)}},[g]);let w=[{id:1,label:"Teaching Style",value:v.teaching_style||_.teaching_style},{id:2,label:"Credentials & Affiliations",value:v.credentials_and_affiliations||_.credentials_and_affiliations},{id:3,label:"Curriculum",value:v.curriculum||_.curriculum}];return(0,r.jsxs)(c.Fragment,{children:[null===n?(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsx)("div",{className:"mr-4 mt-4",children:(0,r.jsx)(T.Z,{onClick:t,className:"close custom-close-icon",style:{cursor:"pointer"}})})}):(0,r.jsx)("div",{className:"".concat(n.isCategory&&!b.select_trainer&&"media-body media-body text-right"||!n.isCategory&&"media-body media-body text-right"),children:(0,r.jsx)("div",{className:"mr-2 mt-1",children:n.isCategory?b.select_trainer?(0,r.jsx)(D.Z,{style:{cursor:"pointer"},className:"custom-arrow-icon",onClick:()=>{y(e=>({...e,_id:null,select_trainer:!1,fullname:null}))}}):(0,r.jsx)(T.Z,{onClick:t,style:{cursor:"pointer"},className:"custom-close-icon"}):(0,r.jsx)(T.Z,{onClick:t,className:"close custom-close-icon",style:{cursor:"pointer"}})})}),(0,r.jsx)("div",{className:"custom-trainer-scroll",style:{marginTop:"24px"},children:b.select_trainer?(0,r.jsx)(TrainerInfo,{accordionData:w,activeAccordion:f,setActiveAccordion:j,element:l,getTraineeSlots:m,trainerDetails:b,setAccordionsData:C,trainerInfo:n}):(0,r.jsx)(SelectedCategory,{getTraineeSlots:m,trainerInfo:n,setTrainerDetails:y,selectTrainer:i,searchQuery:a,setFilterParams:p,filterParams:g,dispatch:d,handleTrainerAvailable:u})})]})},SelectedCategory=e=>{let{getTraineeSlots:t,trainerInfo:l,setTrainerDetails:n,selectTrainer:i,searchQuery:s,setFilterParams:a,filterParams:o,dispatch:c,handleTrainerAvailable:d}=e;return(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-12 col-lg-2 col-md-3 col-sm-3",children:[(0,r.jsx)("div",{className:"d-flex justify-content-between",children:(0,r.jsx)("h3",{children:"Filters "})}),(0,r.jsx)("hr",{className:"hr"}),(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("h4",{className:"border border-secondary rounded-pill p-10 d-flex justify-content-center align-items-center mb-4",children:l?l.name:s})}),(0,r.jsx)("p",{children:"Select as many filters as you would like."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Day of the week"}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(p(),{placeholderText:"Select Day",minDate:j()().toDate(),onChange:e=>{let t=new Date(e).getDay();a({...o,date:e,day:x.c1[t-1]})},selected:o.date,customInput:(0,r.jsx)(L.Z,{})})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("b",{children:" Time of Day"})}),(0,r.jsx)("div",{className:"mt-3 pl-3",children:x.ML.map((e,t)=>(0,r.jsx)("div",{className:"my-2",children:(0,r.jsxs)(Z.Z,{check:!0,children:[(0,r.jsx)(L.Z,{defaultChecked:e.id===x.yK,onChange:e=>{console.log("event --- ",e);let t=e.target.value,l=x.ML.find(e=>e.id===+t);l&&l.time&&a({...o,time:l.time})},type:"radio",value:e.id,defaultValue:1,name:"time-of-day"}),(0,r.jsx)("span",{children:e.label})]})},"time-of-day-".concat(t,"-").concat(e.id)))})]})]}),(0,r.jsx)("div",{className:"col-12 col-lg-px-5 col-lg-10 col-md-9 col-sm-9",style:{height:"89vh"},children:t.length?t.map((e,t)=>{var l,s;return(0,r.jsx)("div",{className:"card custom-card mb-4",style:{borderRadius:"20px"},children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,r.jsx)("img",{src:e.profilePicture?e.profilePicture:"/assets/images/avtar/statusMenuIcon.jpeg",className:"cardimg",style:{borderRadius:"15px"},alt:"profile-picture"})}),(0,r.jsxs)("div",{className:"col-sm-6 col-md-6 co-lg-8 col-xl-8  ",children:[(0,r.jsx)("h3",{className:"card-title pointer underline",onClick:()=>{n(t=>({...t,_id:e&&e._id,select_trainer:!0})),c(d(null)),i(e&&e._id,e&&e.trainer_id,e&&e)},children:e?e.fullname:""}),(0,r.jsxs)("p",{className:"badge badge-pill badge-primary mb-2 p-2",style:{fontSize:"15px"},children:["$".concat((null==e?void 0:null===(l=e.extraInfo)||void 0===l?void 0:l.hourly_rate)||x.ND,".00"),"/ ".concat(x.cB)]}),(0,r.jsx)("h4",{className:"".concat(""),style:{marginBottom:"0px"},children:e&&e.extraInfo?y.c.truncateText(e.extraInfo.about,200):x.v0.notAvailableDescription}),(0,r.jsx)("div",{children:e&&(null==e?void 0:e.extraInfo)&&(null==e?void 0:null===(s=e.extraInfo)||void 0===s?void 0:s.social_media_links)?(0,r.jsx)(M.Z,{profileImageURL:e&&e.extraInfo&&e.extraInfo.social_media_links&&e.extraInfo.social_media_links.profile_image_url,social_media_links:e&&e.extraInfo&&e.extraInfo.social_media_links}):null})]}),(0,r.jsx)("div",{className:"col-sm-3 col-md-3 col-lg-2 col-xl-2  rating",children:showRatings(e.trainer_ratings,"d-flex ")})]})},t)},"trainers_".concat(t))}):(0,r.jsx)("div",{className:"text-center container mw-100 border border-secondary p-30 mb-4",style:{borderRadius:"20px"},children:"No trainer found"})})]})},showRatings=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{ratingRatio:l,totalRating:n}=y.c.getRatings(e);return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:t,children:[(0,r.jsx)(P.Z,{color:"#FFC436",size:28,className:"star-container star-svg"}),(0,r.jsx)("p",{className:"ml-1 mt-1 mr-1 font-weight-light",children:l||0}),(0,r.jsxs)("p",{className:"mt-1",children:["(",n||0,")"]})]})})},TrainerInfo=e=>{var t,l,n,i,s,a,o,d,m,u;let{accordionData:h,activeAccordion:v,setActiveAccordion:g,element:p,getTraineeSlots:f,trainerDetails:j,setAccordionsData:b}=e,y=(()=>{let e=f.find(e=>e&&e._id===j._id);return e})();(0,c.useEffect)(()=>{y&&y.extraInfo?b(e=>{var t,l,n;return{prev:e,teaching_style:null==y?void 0:null===(t=y.extraInfo)||void 0===t?void 0:t.teaching_style,credentials_and_affiliations:null==y?void 0:null===(l=y.extraInfo)||void 0===l?void 0:l.credentials_and_affiliations,curriculum:null==y?void 0:null===(n=y.extraInfo)||void 0===n?void 0:n.curriculum}}):b(e=>({prev:e,teaching_style:null,credentials_and_affiliations:null,curriculum:null}))},[y]);let N=y&&(null==y?void 0:y.extraInfo)&&(null==y?void 0:null===(l=y.extraInfo)||void 0===l?void 0:null===(t=l.media)||void 0===t?void 0:t.map((e,t)=>{let{url:l,description:n,title:i,type:s,thumbnail:a=""}=e;return{original:l,thumbnail:a,description:n,title:i,type:s}})),_=Array.isArray(null==y?void 0:y.trainer_ratings)?y.trainer_ratings.some(e=>{let{ratings:t}=e;return null==t?void 0:t.trainee}):null;return(0,r.jsxs)("div",{className:"row",style:{margin:"0px",padding:"10px",height:!x.Qm.TRAINEE||!x.Qm.TRAINER&&"92vh",overflowX:!x.Qm.TRAINEE||!x.Qm.TRAINER&&"auto"},children:[(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-4 col-md-3 col-lg-2",children:(0,r.jsx)("img",{src:y&&y.profilePicture?y.profilePicture:"/assets/images/avtar/statusMenuIcon.jpeg",width:100,style:{marginTop:"15px",minHeight:"120px",minWidth:"110px"},className:"img-fluid rounded profile_picture",alt:"profile-picture"})}),(0,r.jsxs)("div",{className:"col-8 col-md-8 col-lg-8",children:[(0,r.jsx)("h2",{className:"mt-3",children:y&&y?y.fullname:null}),(0,r.jsxs)("h3",{className:"mt-3",children:["Hourly Rate: $",(null==y?void 0:null===(n=y.extraInfo)||void 0===n?void 0:n.hourly_rate)||x.ND]}),showRatings(y&&(null==y?void 0:y.trainer_ratings),"mt-3 mb-3 d-flex"),y&&(null==y?void 0:y.extraInfo)&&(null==y?void 0:null===(i=y.extraInfo)||void 0===i?void 0:i.media)&&(null==y?void 0:null===(s=y.extraInfo)||void 0===s?void 0:s.social_media_links)?(0,r.jsx)(M.Z,{profileImageURL:y&&(null==y?void 0:y.extraInfo)&&(null==y?void 0:null===(a=y.extraInfo)||void 0===a?void 0:a.social_media_links)&&(null==y?void 0:null===(d=y.extraInfo)||void 0===d?void 0:null===(o=d.social_media_links)||void 0===o?void 0:o.profile_image_url),social_media_links:y&&(null==y?void 0:y.extraInfo)&&(null==y?void 0:null===(m=y.extraInfo)||void 0===m?void 0:m.social_media_links),isvisible:!1}):null]})]}),(0,r.jsx)("p",{className:"mt-3 text-start",children:y&&y.extraInfo&&y.extraInfo.about}),h.length?h.map((e,t)=>(0,r.jsx)(O.Z,{className:"mb-5",children:(0,r.jsxs)(O.Z.Item,{children:[(0,r.jsx)(O.Z.Header,{index:t,activeAccordion:v,onAClick:()=>{v[t]?delete v[t]:v[t]?v[t]=!v[t]:v[t]=!0,g(v)},children:e.label}),(0,r.jsx)(O.Z.Body,{children:e.value?e.value:x.v0.notFound})]})},"accordion_".concat(t))):x.v0.notFound]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("h2",{className:"mb-4 tag-name booking-text",children:"Featured content "}),N&&(null==N?void 0:N.length)?(0,r.jsx)(F.Z,{media:N,originalMedia:y&&(null==y?void 0:y.extraInfo)&&(null==y?void 0:null===(u=y.extraInfo)||void 0===u?void 0:u.media)}):(0,r.jsx)("div",{className:"no-media-found",children:x.v0.noMediaFound}),(0,r.jsx)("h2",{className:"ml-n1 tag-name booking-text",children:"Book session"}),(0,r.jsx)("div",{className:"mt-3",children:p}),_&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-3 booking-text  tag-name",children:"Reviews"}),(0,r.jsx)("div",{className:"ml-lg-n4",children:(0,r.jsx)(J.Z,{trainer:y})})]})]})]})};var W=l(28085),U=l(23279),B=l.n(U),G=l(94165),z=l(43211);let{isSidebarToggleEnabled:Q}=W.bookingsAction,{removePaymentIntent:q}=N.traineeAction;var trainee_scheduleTraining=()=>{let e=(0,h.TL)(),{status:t,getTraineeSlots:l,transaction:n}=(0,h.CG)(N.F),{trainersList:i}=(0,h.CG)(z.jS),{configs:s}=(0,h.CG)(W.fG),{isSlotAvailable:a,session_durations:o,availableSlots:d}=(0,h.CG)(V.w6),{selectedTrainerId:m}=(0,h.CG)(W.fG),{master:u}=(0,h.CG)(A.T7),[g,f]=(0,c.useState)(new Date),[b,_]=(0,c.useState)(null),[C,w]=(0,c.useState)(x.f),[S,O]=(0,c.useState)([]),[D,P]=(0,c.useState)([]),[M,F]=(0,c.useState)([]),[L,Z]=(0,c.useState)([]),[H,J]=(0,c.useState)([]),[U,X]=(0,c.useState)(!1),[Y,$]=(0,c.useState)({trainer_id:""}),[K,ee]=(0,c.useState)({startTime:"",endTime:""}),[et,el]=(0,c.useState)({id:null,trainer_id:null,data:{}}),[en,ei]=(0,c.useState)(""),[es,ea]=(0,c.useState)(!1),[eo,er]=(0,c.useState)({userInfo:null,selected_category:null}),[ec,ed]=(0,c.useState)({});(0,c.useEffect)(()=>{C.search&&e((0,N.Vt)(C))},[C]),(0,c.useEffect)(()=>{e((0,z.AH)())},[]),(0,c.useEffect)(()=>{let e=y.c.getDateInFormat(new Date),{weekDates:t,weekDateFormatted:n}=y.c.getNext7WorkingDays(e);setColumns(n),Z(l.map(e=>({id:e._id,trainer_id:e.trainer_id,background_image:null==e?void 0:e.profilePicture,isActive:!0,category:null==e?void 0:e.category,name:null==e?void 0:e.fullname,isCategory:!1,extraInfo:e.extraInfo})))},[l]),(0,c.useEffect)(()=>{F(i.map(e=>{let{id:t,fullname:l,profile_picture:n,category:i,extraInfo:s}=e;return{id:t,isActive:!0,isCategory:!1,name:l,background_image:n,category:i,extraInfo:s}}))},[i]),(0,c.useEffect)(()=>{let{masterData:e}=u;if(O([]),e&&e.category&&e.category.length){let t=e.category.map(e=>({id:e,name:e,isCategory:!0}));O(t)}},[u]),(0,c.useEffect)(()=>{var e,t;n&&(null==n?void 0:n.intent)&&(null==n?void 0:null===(e=n.intent)||void 0===e?void 0:e.result)&&(null==n?void 0:null===(t=n.intent.result)||void 0===t?void 0:t.client_secret)&&X(!0)},[n]),(0,c.useEffect)(()=>{er(e=>({...e,userInfo:null}))},[]),(0,c.useEffect)(()=>{er(e=>({...e,userInfo:void 0,selected_category:void 0}))},[]);let[em,eu]=(0,c.useState)(window.innerWidth);(0,c.useEffect)(()=>{let handleResize=()=>{eu(window.innerWidth)};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}},[]),(0,c.useEffect)(()=>{var t,l,n,i,s,a,o,r;if((null==et?void 0:et.trainer_id)||(null==eo?void 0:null===(t=eo.userInfo)||void 0===t?void 0:t.trainer_id)){let t=y.c.getDateInFormat(g),c={booked_date:t,trainer_id:(null==eo?void 0:null===(l=eo.userInfo)||void 0===l?void 0:l.trainer_id)||(null==et?void 0:et.trainer_id),slotTime:{from:(null==eo?void 0:null===(i=eo.userInfo)||void 0===i?void 0:null===(n=i.extraInfo)||void 0===n?void 0:n.working_hours)?y.c.getTimeFormate(null===(s=eo.userInfo.extraInfo.working_hours)||void 0===s?void 0:s.from):x.ie.startTime,to:(null==eo?void 0:null===(o=eo.userInfo)||void 0===o?void 0:null===(a=o.extraInfo)||void 0===a?void 0:a.working_hours)?y.c.getTimeFormate(null===(r=eo.userInfo.extraInfo.working_hours)||void 0===r?void 0:r.to):x.ie.endTime}};e((0,V.V$)(c))}},[et,eo]),(0,c.useEffect)(()=>{if(t===x.Q_.fulfilled){var l,n;let t=y.c.getDateInFormat(g);if((null==eo?void 0:null===(l=eo.userInfo)||void 0===l?void 0:l.trainer_id)||(null==et?void 0:et.trainer_id)){let l={trainer_id:(null==eo?void 0:null===(n=eo.userInfo)||void 0===n?void 0:n.trainer_id)||(null==et?void 0:et.trainer_id),booked_date:t,slotTime:{from:K.startTime?K.startTime:x.ie.startTime,to:K.endTime?K.endTime:x.ie.endTime}};e((0,V.V$)(l))}}},[t]);let setColumns=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];P([]);let t=e.map((e,t)=>({title:y.c.capitalizeFirstLetter(e),dataIndex:"".concat(e.split(" ")[0].toLowerCase()),key:"week-col-".concat(t),width:100}));P([{title:"",dataIndex:"trainer_info",key:"Available_Trainers",width:70,render:(e,t)=>{let{category:l,email:n,fullname:i,profilePicture:s,trainer_id:a,_id:o}=e;return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("img",{height:100,width:100,src:s,className:"rounded"}),(0,r.jsx)("p",{htmlFor:"exampleFormControlInput1",className:"form-label mt-2",children:i})]})}},...t])},Input=e=>{let{onChange:t,placeholder:l,value:n,isSecure:i,id:s,onClick:a}=e;return(0,r.jsx)("span",{onChange:t,placeholder:l,value:n,isSecure:i,id:s,onClick:a,className:"select_date",children:y.c.formateDate(g)})},renderPaymentContent=()=>{var e,t,l;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{children:[" ","Trainer: ",ec.trainer_info.fullname," (Price per hour $",(null==ec?void 0:null===(l=ec.trainer_info)||void 0===l?void 0:null===(t=l.userInfo)||void 0===t?void 0:null===(e=t.extraInfo)||void 0===e?void 0:e.hourly_rate)||x.ND,")"," "]}),(0,r.jsxs)("h4",{className:"mt-3 mb-3",children:["Booking time: ",j()(null==ec?void 0:ec.booked_date).format("ll")," | From: ",null==ec?void 0:ec.session_start_time," To:"," ",null==ec?void 0:ec.session_end_time]}),(0,r.jsxs)("h4",{className:"mb-3",children:["Price:",(0,r.jsxs)("b",{children:["$",null==ec?void 0:ec.charging_price]})]})]})},renderStripePaymentContent=()=>{var t,l,i;return n&&(null==n?void 0:n.intent)&&(null==n?void 0:null===(t=n.intent)||void 0===t?void 0:t.result)?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"d-flex justify-content-end mr-3",children:(0,r.jsx)("h2",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>{X(!1),e(q())},children:(0,r.jsx)(T.Z,{})})}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:(0,r.jsx)(k.Z,{clientSecret:null==n?void 0:null===(i=n.intent)||void 0===i?void 0:null===(l=i.result)||void 0===l?void 0:l.client_secret,handlePaymentSuccess:async()=>{X(!1),await e((0,N.ww)(ec)),_(null),ed({}),e(v.vA.setActiveTab("scheduleTraining"))},extraContent:ec&&ec.trainer_id?renderPaymentContent():(0,r.jsx)(r.Fragment,{})})})})]}):(0,r.jsx)(r.Fragment,{})};return(0,r.jsx)(c.Fragment,{children:null===eo.userInfo||eo&&eo.userInfo?(0,r.jsx)("div",{className:"custom-scroll",children:(0,r.jsx)(TrainerDetails,{selectOption:eo,isPopoverOpen:b,categoryList:S,searchQuery:en,trainerInfo:eo.userInfo,selectTrainer:(e,t,l)=>{e&&el({...et,id:e,trainer_id:t,data:l})},onClose:()=>{er(e=>({...e,userInfo:void 0,selected_category:void 0})),w(e=>({...e,search:null}))},element:(()=>{var l,n,i,s,o,m,u,h,v,b,_,w,S,T;let{data:{extraInfo:k}={}}=et||{},{from:E,to:A}=(null==k?void 0:k.working_hours)||{};E&&y.c.getTimeFormate(E),A&&y.c.getTimeFormate(A);let O=y.c.getTimeFormate(null==eo?void 0:null===(i=eo.userInfo)||void 0===i?void 0:null===(n=i.extraInfo)||void 0===n?void 0:null===(l=n.working_hours)||void 0===l?void 0:l.from),P=y.c.getTimeFormate(null==eo?void 0:null===(m=eo.userInfo)||void 0===m?void 0:null===(o=m.extraInfo)||void 0===o?void 0:null===(s=o.working_hours)||void 0===s?void 0:s.to);return(0,r.jsxs)(c.Fragment,{children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-12 mb-3 d-flex ml-n3 ",children:[(0,r.jsxs)("label",{className:"mr-2 mt-2 ml-3",style:{fontSize:"14px"},children:["Select date :"," "]}),(0,r.jsx)("div",{className:"date-picker",children:(0,r.jsx)(p(),{style:{fontSize:"14px"},className:"mt-1",minDate:j()().toDate(),onChange:t=>{if(t){var l;let n=y.c.getDateInFormat(t),i={trainer_id:(null==eo?void 0:null===(l=eo.userInfo)||void 0===l?void 0:l.trainer_id)||(null==et?void 0:et.trainer_id),booked_date:n,slotTime:{from:O||K.startTime||x.ie.startTime,to:P||K.endTime||x.ie.endTime}};e((0,V.V$)(i)),f(t)}let n=y.c.getDateInFormat(t.toString()),{weekDateFormatted:i,weekDates:s}=y.c.getNext7WorkingDays(n);setColumns(i),setColumns(i)},selected:g,customInput:(0,r.jsx)(Input,{})})})]}),(0,r.jsx)("div",{className:"col-11",children:C.search&&C.search.length||!D.length?(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("label",{className:"mt-1 ml-3",style:{fontSize:"13px"},children:["Session Duration :"," "]}),(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-11 col-lg-12 col-xl-8 col-xxl-8 mt-1 mb-2 ml-2 ",children:(0,r.jsx)(G.Z,{availableSlots:d||[{start_time:"",end_time:""}],startTime:(null==eo?void 0:null===(v=eo.userInfo)||void 0===v?void 0:null===(h=v.extraInfo)||void 0===h?void 0:null===(u=h.working_hours)||void 0===u?void 0:u.from)?y.c.convertHoursToMinutes(O):x.tn.start,endTime:(null==eo?void 0:null===(w=eo.userInfo)||void 0===w?void 0:null===(_=w.extraInfo)||void 0===_?void 0:null===(b=_.working_hours)||void 0===b?void 0:b.to)?y.c.convertHoursToMinutes(P):x.tn.end,trainerHourlyRate:null==eo?void 0:null===(T=eo.userInfo)||void 0===T?void 0:null===(S=T.extraInfo)||void 0===S?void 0:S.working_hours,onChange:e=>{let t=e.startTime,l=e.endTime;if(t&&l){var n;(null==eo?void 0:null===(n=eo.userInfo)||void 0===n?void 0:n.trainer_id)||null==et||et.trainer_id,ee({...K,startTime:t,endTime:l});let e=B()(()=>{},x.Xl.towSec);e()}},isSlotAvailable:a},"time-range-slider")}),(0,r.jsx)("div",{className:"col-12 mb-3 d-flex justify-content-center align-items-center",children:(0,r.jsx)("button",{type:"button",disabled:!y.c.isTimeRangeAvailable(d,K.startTime,K.endTime||t===x.Q_.pending),className:"mt-3 btn btn-sm btn-primary",onClick:()=>{var t,l,n,i,s,a,o;let r=y.c.getMinutesFromHourMM(K.startTime,K.endTime,null==eo?void 0:null===(l=eo.userInfo)||void 0===l?void 0:null===(t=l.extraInfo)||void 0===t?void 0:t.hourly_rate);if(r>0){if(y.c.isValidTimeDuration(K.startTime,K.endTime,x.Xd)){if(y.c.isInRange(g,K.startTime,K.endTime))R.Am.error("The specified time has elapsed. Please select another time...");else{let t={charging_price:r,trainer_id:(null==eo?void 0:null===(n=eo.userInfo)||void 0===n?void 0:n.trainer_id)||(null==et?void 0:et.trainer_id),trainer_info:eo||et.data,hourly_rate:(null==eo?void 0:null===(s=eo.userInfo)||void 0===s?void 0:null===(i=s.extraInfo)||void 0===i?void 0:i.hourly_rate)||(null==et?void 0:null===(o=et.data)||void 0===o?void 0:null===(a=o.extraInfo)||void 0===a?void 0:a.hourly_rate),status:x.Jl.booked,booked_date:g,session_start_time:K.startTime,session_end_time:K.endTime};ed(t),e((0,N.OS)({amount:+r.toFixed(1)}))}}else R.Am.error("Session duration must be greater then ".concat(x.Xd," minutes..."))}else R.Am.error("Invalid slot timing...")},children:"Book Slot Now"})})]}):(0,r.jsx)(trainerSlider,{list:L})})]}),(0,r.jsx)(I.Z,{isOpen:U,element:renderStripePaymentContent()})]})})()},"trainerDetails")}):(0,r.jsx)("div",{className:"custom-scroll trainee-dashboard",children:(0,r.jsxs)("div",{onScroll:()=>{s.sidebar.isMobileMode&&e(Q(!0))},className:"bookings custom-scroll custom-trainee-dashboard",children:[(0,r.jsx)("div",{id:"dashboard",className:"d-flex justify-content-center align-items-center dashboard-search-trainer",style:{height:"94%"},children:(0,r.jsx)(E.Z,{placeholder:"Search Trainers...",options:[...L,...S],label:"name",id:"id",customClasses:{searchBar:"search-bar-trainee",searchButton:"search-button-trainee",dropdown:"custom-dropdown-width"},onSearchClick:e=>{e&&er(t=>({...t,userInfo:null,selected_category:e})),ei(e)},searchValue:e=>{w({search:e})},selectedOption:e=>{e&&e.isCategory?er(t=>({...t,userInfo:e,selected_category:e.name})):er(t=>({...t,userInfo:e,selected_category:null}))},handleChange:e=>{w({search:e})}})}),(0,r.jsxs)("div",{className:"trainer-recommended",children:[(0,r.jsx)("h2",{children:"Recommended"}),(0,r.jsx)(trainerSlider,{list:M})]}),(0,r.jsx)("div",{style:{height:"11vh"}})]})})})},dashboard=()=>(0,r.jsx)(trainee_scheduleTraining,{}),X=l(11163);let Y={DRAW:"DRAW",STOP_DRAWING:"STOP_DRAWING",EMIT_DRAWING_CORDS:"EMIT_DRAWING_CORDS",EMIT_CLEAR_CANVAS:"EMIT_CLEAR_CANVAS",ON_CLEAR_CANVAS:"ON_CLEAR_CANVAS",ON_UNDO:"ON_UNDO",ON_VIDEO_SELECT:"ON_VIDEO_SELECT",ON_VIDEO_SHOW:"ON_VIDEO_SHOW",ON_VIDEO_PLAY_PAUSE:"ON_VIDEO_PLAY_PAUSE",ON_VIDEO_TIME:"ON_VIDEO_TIME",VIDEO_CALL:{ON_OFFER:"offer",ON_SIGNAL:"signal",ON_ANSWER:"answer",ON_ICE_CANDIDATE:"ice-candidate",ON_STREAM:"stream",ON_CONNECT:"connect",ON_CLOSE:"close",MUTE_ME:"MUTE_ME",STOP_FEED:"STOP_FEED"}};var $=l(73836),K=l(7248),ee=l(44967),et=l(728),el=l(60329),en=l(59046),ei=l(5661),es=l(49663),ea=l(50794),eo=l(45720),er=l(46838),ec=l(30833),ed=l(55654),em=l(40051),eu=l(25675),eh=l.n(eu),ev=l(21988),ex=l(81780),eg=l(33073),ep=l(93893);l(47964);let CanvasMenuBar=e=>{let{isOpen:t,setIsOpen:l,canvasConfigs:n,sketchPickerColor:i,setSketchPickerColor:s,undoDrawing:a,refreshDrawing:o,setCanvasConfigs:d,drawShapes:m,selectedClips:u,setSelectedClips:h,toUser:v}=e,[g,p]=(0,c.useState)(!1),[f,j]=(0,c.useState)(x.HS.FREE_HAND),[y,N]=(0,c.useState)("media"),[S,k]=(0,c.useState)([]),[R,E]=(0,c.useState)([]),[A,O]=(0,c.useState)([]);(0,c.useEffect)(()=>{t&&getMyClips()},[t]);let getMyClips=async()=>{var e=await (0,ep.c)({});k(null==e?void 0:e.data);var t=await (0,ep.e)({}),l=(null==t?void 0:t.data)||[];for(let e=0;e<(null==l?void 0:l.length);e++){var n,i=null===(n=l[e])||void 0===n?void 0:n.clips;l[e].clips=[...new Map(i.map(e=>[e.clips._id,e])).values()]}E(l),O([])},D=window.matchMedia("(min-width: 768px)");return(0,r.jsxs)("div",{style:{margin:"1rem",display:"flex",justifyContent:"center"},children:[(0,r.jsx)("div",{className:"creationBarItem ",style:D.matches?{width:52}:{width:"100%"},children:(0,r.jsxs)("div",{className:"CreationBarCustomizable",children:[(0,r.jsx)("span",{}),(0,r.jsxs)("span",{children:[(0,r.jsx)(b.Popover,{className:"color-picker-popover",isOpen:g,positions:["left","right"],padding:10,reposition:!0,onClickOutside:()=>p(!1),content:e=>{let{position:t,nudgedLeft:l,nudgedTop:a}=e;return(0,r.jsx)("div",{children:(0,r.jsx)(ev.xS,{onChange:e=>{let t={...n,sender:{...n.sender,strokeStyle:e.hex}};d(t),n=t,s(e.rgb)},color:i})})},children:(0,r.jsx)("div",{className:"icon-btn m-5  button-effect btn-sm",onClick:()=>{p(!0)},children:(0,r.jsx)(eh(),{src:"/icons/color-wheel.png",width:20,height:20,alt:"color-picker"})})}),(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(x.HS.FREE_HAND===f?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.FREE_HAND),j(x.HS.FREE_HAND)},children:(0,r.jsx)(ed.Z,{})})]}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.LINE?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.LINE),j(x.HS.LINE)},children:(0,r.jsx)(eh(),{src:"/icons/line.png",width:20,height:20,alt:"line"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.CIRCLE?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.CIRCLE),j(x.HS.CIRCLE)},children:(0,r.jsx)("i",{className:"fa fa-circle-thin"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.SQUARE?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.SQUARE),j(x.HS.SQUARE)},children:(0,r.jsx)("i",{className:"fa fa-square-o"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.RECTANGLE?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.RECTANGLE),j(x.HS.RECTANGLE)},children:(0,r.jsx)(eh(),{src:"/icons/rectangle.png",width:20,height:20,alt:"rectangle"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.OVAL?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.OVAL),j(x.HS.OVAL)},children:(0,r.jsx)(eh(),{src:"/icons/oval.png",width:20,height:20,alt:"oval"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.TRIANGLE?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.TRIANGLE),j(x.HS.TRIANGLE)},children:(0,r.jsx)(eh(),{src:"/icons/triangle.png",width:20,height:20,alt:"triangle"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5 my-3  button-effect btn-sm ".concat(f===x.HS.ARROW_RIGHT?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.ARROW_RIGHT),j(x.HS.ARROW_RIGHT)},children:(0,r.jsx)("i",{className:"fa fa-long-arrow-right"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5  button-effect btn-sm ".concat(f===x.HS.TWO_SIDE_ARROW?"btn-outline-primary":"btn-outline-light"),onClick:()=>{m(x.HS.TWO_SIDE_ARROW),j(x.HS.TWO_SIDE_ARROW)},children:(0,r.jsx)("i",{className:"fa fa-arrows-v rotate-90"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5  button-effect btn-sm my-3",onClick:a,children:(0,r.jsx)(eh(),{src:"/icons/undo.png",width:20,height:20,alt:"Undo"})})}),(0,r.jsx)("span",{children:(0,r.jsx)("div",{className:"icon-btn m-5  button-effect btn-sm my-3",onClick:o,children:(0,r.jsx)(em.Z,{})})})]})}),(0,r.jsx)(I.Z,{isOpen:t,element:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container media-gallery portfolio-section grid-portfolio",children:[(0,r.jsxs)("div",{className:"theme-title  mb-5",children:[(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsx)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{h(A),l(!1)},children:(0,r.jsx)(T.Z,{})})}),(0,r.jsx)("div",{className:"media d-flex flex-column  align-items-center",children:(0,r.jsx)("div",{children:(0,r.jsxs)("h2",{children:["Select 2 clips to share with ",null==v?void 0:v.fullname]})})})]}),(0,r.jsx)("div",{className:"theme-tab",children:(0,r.jsxs)(_.Z,{tabs:!0,className:"justify-content-around",children:[(0,r.jsx)(C.Z,{className:"ml-5px",children:(0,r.jsx)(w.Z,{className:"button-effect ".concat("media"===y?"active":""),onClick:()=>N("media"),children:"My Clips"})}),(0,r.jsx)(C.Z,{className:"ml-5px",children:(0,r.jsx)(w.Z,{className:"button-effect ".concat("trainee"===y?"active":""),onClick:()=>N("trainee"),children:"Trainee"})}),(0,r.jsx)(C.Z,{className:"ml-5px",children:(0,r.jsx)(w.Z,{className:"button-effect ".concat("docs"===y?"active":""),onClick:()=>N("docs"),children:"Netquix"})})]})}),(0,r.jsx)("div",{className:"file-tab",children:(0,r.jsxs)(ex.Z,{activeTab:y,className:"custom-scroll",children:[(0,r.jsx)(eg.Z,{tabId:"media",children:(0,r.jsx)("div",{className:"media-gallery portfolio-section grid-portfolio",children:(null==S?void 0:S.length)?null==S?void 0:S.map((e,t)=>{var l;return(0,r.jsxs)("div",{className:"collapse-block open",children:[(0,r.jsxs)("h5",{className:"block-title",onClick:()=>{var e=S;(e=e.map(e=>({...e,show:!1})))[t].show=!0,k([...e])},children:[null==e?void 0:e._id,(0,r.jsx)("label",{className:"badge badge-primary sm ml-2",children:null==e?void 0:null===(l=e.clips)||void 0===l?void 0:l.length})]}),(0,r.jsx)("div",{className:"block-content",children:(0,r.jsx)("div",{className:"row",style:{margin:0},children:null==e?void 0:e.clips.map((e,t)=>{var l=A.find(t=>(null==t?void 0:t._id)===(null==e?void 0:e._id));return(0,r.jsx)("div",{className:"col-4 p-1",style:{borderRadius:5},onClick:()=>{if(!l&&(null==A?void 0:A.length)<2)A.push(e),O([...A]);else{var t=JSON.parse(JSON.stringify(A));O([...t=t.filter(t=>t._id!==(null==e?void 0:e._id))])}},children:(0,r.jsx)("video",{style:{border:"".concat(l?"2px":"0px"," solid green"),width:"98%",maxHeight:"150px",height:"100%",marginBottom:"10px"},preload:"metadata",children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==e?void 0:e._id,"#t=01"),type:"video/mp4"})})},t)})})})]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"40px"},children:(0,r.jsx)("h5",{className:"block-title",children:"  No Data Found"})})})})}),(0,r.jsx)(eg.Z,{tabId:"trainee",children:(0,r.jsx)("div",{className:"media-gallery portfolio-section grid-portfolio",children:(null==R?void 0:R.length)?null==R?void 0:R.map((e,t)=>{var l,n;return(0,r.jsxs)("div",{className:"collapse-block open",children:[(0,r.jsxs)("h5",{className:"block-title",onClick:()=>{var e=R;(e=e.map(e=>({...e,show:!1})))[t].show=!0,E([...e])},children:[null==e?void 0:null===(l=e._id)||void 0===l?void 0:l.fullname,(0,r.jsx)("label",{className:"badge badge-primary sm ml-2",children:null==e?void 0:null===(n=e.clips)||void 0===n?void 0:n.length})]}),(0,r.jsx)("div",{className:"block-content ",children:(0,r.jsx)("div",{className:"row",style:{margin:0},children:null==e?void 0:e.clips.map((e,t)=>{var l,n=A.find(t=>{var l;return(null==t?void 0:t._id)===(null==e?void 0:null===(l=e.clips)||void 0===l?void 0:l._id)});return(0,r.jsx)("div",{className:"col-4 p-1",style:{borderRadius:5},onClick:()=>{if(!n&&(null==A?void 0:A.length)<2)A.push(null==e?void 0:e.clips),O([...A]);else{var t=JSON.parse(JSON.stringify(A));O([...t=t.filter(t=>{var l;return t._id!==(null==e?void 0:null===(l=e.clips)||void 0===l?void 0:l._id)})])}},children:(0,r.jsx)("video",{style:{border:"".concat(n?"2px":"0px"," solid green"),width:"98%",maxHeight:"150px",height:"100%",marginBottom:"10px"},preload:"metadata",children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==e?void 0:null===(l=e.clips)||void 0===l?void 0:l._id,"#t=01"),type:"video/mp4"})})},t)})})})]})}):(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"40px"},children:(0,r.jsx)("h5",{className:"block-title",children:"  No Data Found"})})})}),(0,r.jsx)(eg.Z,{tabId:"docs",children:(0,r.jsx)("div",{className:"media-gallery portfolio-section grid-portfolio",children:(0,r.jsx)("div",{className:"collapse-block open",children:(0,r.jsx)("div",{className:"block-content ",children:(0,r.jsx)("div",{className:"row",style:{margin:0},children:[...Array(8).keys()].map((e,t)=>{var l={_id:"656acd81cd2d7329ed0d8e91",title:"Dog Activity",category:"Acting",user_id:"6533881d1e8775aaa25b3b6e",createdAt:"2023-12-02T06:24:01.995Z",updatedAt:"2023-12-02T06:24:01.995Z"},n=A.find(e=>(null==e?void 0:e._id)===(null==l?void 0:l._id));return(0,r.jsx)("div",{className:"col-4 p-1",style:{borderRadius:5},onClick:()=>{if(!n&&(null==A?void 0:A.length)<2)A.push(l),O([...A]);else{var e=JSON.parse(JSON.stringify(A));O([...e=e.filter(e=>e._id!==(null==l?void 0:l._id))])}},children:(0,r.jsx)("video",{style:{border:"".concat(n?"2px":"0px"," solid green"),width:"98%",maxHeight:"150px",height:"100%",marginBottom:"10px",display:"flex",justifyContent:"center"},preload:"metadata",children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==l?void 0:l._id,"#t=01"),type:"video/mp4"})})},t)})})})})})})]})})]})})})]})};l(6162);var ef=l(8369),ej=l(83024),eb=l(60766),ey=l(23149),eN=l(84082),e_=l(61120),eC=l.n(e_),ew=l(82084);let eS=Math.PI/180;async function canvasPreview(e,t,l){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=t.getContext("2d");if(!s)throw Error("No 2d context");let a=e.naturalWidth/e.width,o=e.naturalHeight/e.height,r=window.devicePixelRatio;t.width=Math.floor(l.width*a*r),t.height=Math.floor(l.height*o*r),s.scale(r,r),s.imageSmoothingQuality="high";let c=l.x*a,d=l.y*o,m=e.naturalWidth/2,u=e.naturalHeight/2;s.save(),s.translate(-c,-d),s.translate(m,u),s.rotate(i*eS),s.scale(n,n),s.translate(-m,-u),s.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),s.restore()}l(921);var eI=l(18163);function centerAspectCrop(e,t,l){return(0,ew._H)((0,ew.YG)({unit:"%",width:90},l,e,t),e,t)}var cropimage=e=>{var t,l,n;let{isOpenCrop:i,setIsOpenCrop:s,selectImage:a,screenShots:o,setScreenShots:d,handleCropImage:m}=e,[u,h]=(0,c.useState)(""),v=(0,c.useRef)(null),x=(0,c.useRef)(null);(0,c.useRef)(null);let g=(0,c.useRef)(""),[p,f]=(0,c.useState)(),[j,b]=(0,c.useState)(),[y,N]=(0,c.useState)(1),[_,C]=(0,c.useState)(0),[w,S]=(0,c.useState)(16/9);async function onDownloadCropClick(){let e=x.current,t=v.current;if(!e||!t||!j)throw Error("Crop canvas does not exist");let l=e.naturalWidth/e.width,n=e.naturalHeight/e.height,i=new OffscreenCanvas(j.width*l,j.height*n),s=i.getContext("2d");if(!s)throw Error("No 2d context");s.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height);let r=await (null==i?void 0:i.convertToBlob({type:"image/png"}));if(g.current&&URL.revokeObjectURL(g.current),r){let e=new FileReader;e.onloadend=()=>{e.result,m(o[a].imageUrl,r)},e.readAsDataURL(r)}g.current=URL.createObjectURL(r)}return(0,c.useEffect)(()=>{var e;let fetchImage=async()=>{try{var e;let t=await fetch("https://netquix.s3.ap-south-1.amazonaws.com/".concat(null===(e=o[a])||void 0===e?void 0:e.imageUrl)),l=await t.blob(),n=new FileReader;n.onloadend=()=>{let e=n.result.split(",")[1];h("data:image/jpeg;base64,".concat(e))},n.readAsDataURL(l)}catch(e){console.error("Error fetching or converting image:",e)}};(null===(e=o[a])||void 0===e?void 0:e.imageUrl)&&fetchImage()},[a,null===(t=o[a])||void 0===t?void 0:t.imageUrl]),l=async()=>{(null==j?void 0:j.width)&&(null==j?void 0:j.height)&&x.current&&v.current&&canvasPreview(x.current,v.current,j,y,_)},n=[j,y,_],(0,c.useEffect)(()=>{let e=setTimeout(()=>{l.apply(void 0,n)},100);return()=>{clearTimeout(e)}},n),(0,c.useEffect)(()=>{if(w)S(void 0);else if(x.current){let{width:e,height:t}=x.current,l=centerAspectCrop(e,t,16/9);f(l),b((0,ew.BB)(l,e,t))}},[x]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(I.Z,{isOpen:i,element:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container media-gallery portfolio-section grid-portfolio",children:[(0,r.jsxs)("div",{className:"theme-title  mb-5",children:[(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsx)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{s(!1)},children:(0,r.jsx)(T.Z,{})})}),(0,r.jsx)("div",{className:"media d-flex flex-column  align-items-center",children:(0,r.jsx)("div",{children:(0,r.jsx)("h2",{children:"Image Crop"})})})]}),(0,r.jsxs)("div",{className:"theme-tab",children:[!!u&&(0,r.jsx)(ew.ZP,{crop:p,onChange:(e,t)=>f(t),onComplete:e=>b(e),aspect:w,minHeight:100,children:(0,r.jsx)("img",{ref:x,alt:"Crop me",src:u,onLoad:function(e){if(w){let{width:t,height:l}=e.currentTarget;f(centerAspectCrop(t,l,w))}}})}),!!j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{display:"none"},children:(0,r.jsx)("canvas",{ref:v,style:{border:"1px solid black",objectFit:"contain",width:j.width,height:j.height}})}),(0,r.jsx)("div",{className:"d-flex justify-content-center w-100 p-3",children:(0,r.jsx)(eN.Z,{className:"mx-3",color:"primary",onClick:onDownloadCropClick,children:"Save"})})]})]})]})})})})},eT=l(91819),ek=l(96250),eR=l(34155);let getS3SignPdfUrl=async e=>{try{let t=await (0,ek.b)({method:"POST",url:"".concat(eR.env.NEXT_PUBLIC_API_BASE_URL,"/common/pdf-upload-url"),data:e,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});return t.data}catch(e){throw e}};var eE=l(9669),eA=l.n(eE);let eO={sender:[],receiver:[]},eD=null,eP={sender:{strokeStyle:"red",lineWidth:5,lineCap:"round"},receiver:{strokeStyle:"green",lineWidth:5,lineCap:"round"}},eM=!1,eF=[],HandleVideoCall=e=>{let{id:t,accountType:d,fromUser:m,toUser:u,isClose:h}=e,v=(0,c.useContext)($.J),[g,p]=(0,c.useState)({r:241,g:112,b:19,a:1}),[f,j]=(0,c.useState)(null),[b,y]=(0,c.useState)(!1),[N,_]=(0,c.useState)(!1),[C,w]=(0,c.useState)({showMsg:!1,msg:""}),S=(0,c.useRef)(null),k=(0,c.useRef)(null),E={mousedown:!1},[A,O]=(0,c.useState)([]),D=(0,c.useRef)(null),P=(0,c.useRef)(null),M=(0,c.useRef)(null),F=(0,c.useRef)(null),[L,Z]=(0,c.useState)({isPlayingAll:!1,number:"",isPlaying1:!1,isPlaying2:!1}),[H,V]=(0,c.useState)({currentTime1:"00:00",currentTime2:"00:00",remainingTime1:"00:00",remainingTime2:"00:00"}),[J,W]=(0,c.useState)(!1),[U,G]=(0,c.useState)(!1),[z,Q]=(0,c.useState)(!1),q=(0,c.useRef)(null),X=(0,c.useRef)(null),[ed,em]=(0,c.useState)(!1),[eu,eh]=(0,c.useState)(!1),[ev,ex]=(0,c.useState)([]),[eg,ep]=(0,c.useState)({title:"",topic:""}),[e_,ew]=(0,c.useState)([]),[eS,ek]=(0,c.useState)(0);(0,c.useEffect)(()=>{if(console.log("fromUser && toUser --- ",m,u),m&&u)return"undefined"!=typeof navigator&&(o=l(50247).ZP),handleStartCall(),listenSocketEvents(),initializeLocalStates(),()=>{cutCall()}},[]),(0,c.useEffect)(()=>{let e=S.current,t=k.current,l=null==t?void 0:t.getContext("2d");if(!l)return;let drawFrame=()=>{t&&l&&e&&(l.fillStyle="rgba(255, 255, 255, 0.5)",l.fillRect(0,0,t.width,t.height)),requestAnimationFrame(drawFrame)},startDrawing=e=>{var t,s;if(e.preventDefault(),eM=!0,!l)return;n=l.getImageData(0,0,null===(t=document.getElementById("bookings"))||void 0===t?void 0:t.clientWidth,null===(s=document.getElementById("bookings"))||void 0===s?void 0:s.clientHeight),eF.length>=10&&eF.shift(),eF.push(n);let a=getMosuePositionOnCanvas(e);l.strokeStyle=eP.sender.strokeStyle,l.lineWidth=eP.sender.lineWidth,l.lineCap="round",l.beginPath(),l.moveTo(a.x,a.y),l.fill(),E.mousedown=!0,i={x:a.x,y:a.y}},findDistance=()=>Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2)),drawShapes=()=>{switch(eD){case x.HS.LINE:l.moveTo(i.x,i.y),l.lineTo(s.x,s.y);break;case x.HS.CIRCLE:{let e=findDistance(i,s);l.arc(i.x,i.y,e,0,2*Math.PI,!1);break}case x.HS.SQUARE:{let e=s.x-i.x,t=s.y-i.y;l.rect(i.x,i.y,e,t);break}case x.HS.RECTANGLE:{let e=s.x-i.x,t=s.y-i.y;l.rect(i.x,i.y,e,t);break}case x.HS.OVAL:{let e=l.getTransform(),t=s.x-i.x,n=s.y-i.y;l.fillStyle="#FFFFFF",l.fillStyle="rgba(0, 0, 0, 0)";let a=t*e.a,o=n*e.d;a>0&&o>0&&(l.ellipse(s.x,s.y,a,o,0,0,2*Math.PI),l.fill());break}case x.HS.TRIANGLE:l.moveTo(i.x+(s.x-i.x)/2,i.y),l.lineTo(i.x,s.y),l.lineTo(s.x,s.y),l.closePath();break;case x.HS.ARROW_RIGHT:{let e=Math.atan2(s.y-i.y,s.x-i.x),t=s.x+length*Math.cos(e),n=s.y+length*Math.sin(e);l.moveTo(i.x,i.y),l.lineTo(s.x,s.y),l.moveTo(t,n),l.lineTo(s.x-10*Math.cos(e-Math.PI/6),s.y-10*Math.sin(e-Math.PI/6)),l.moveTo(s.x,s.y),l.lineTo(s.x-10*Math.cos(e+Math.PI/6),s.y-10*Math.sin(e+Math.PI/6)),l.stroke();break}case x.HS.TWO_SIDE_ARROW:{let e=i.x,t=i.y,n=s.x,a=s.y,o=Math.atan2(a-t,n-e),r=[{x:n-10*Math.cos(o-Math.PI/6),y:a-10*Math.sin(o-Math.PI/6)},{x:n-10*Math.cos(o+Math.PI/6),y:a-10*Math.sin(o+Math.PI/6)},{x:e+10*Math.cos(o-Math.PI/6),y:t+10*Math.sin(o-Math.PI/6)},{x:e+10*Math.cos(o+Math.PI/6),y:t+10*Math.sin(o+Math.PI/6)}];l.moveTo(e,t),l.lineTo(n,a),l.moveTo(r[0].x,r[0].y),l.lineTo(n,a),l.lineTo(r[1].x,r[1].y),l.moveTo(r[2].x,r[2].y),l.lineTo(e,t),l.lineTo(r[3].x,r[3].y),l.stroke()}}},draw=e=>{if(e.preventDefault(),!eM||!l||!E.mousedown)return;let t=getMosuePositionOnCanvas(e);s={x:null==t?void 0:t.x,y:t.y},eD?(l.putImageData(n,0,0),l.beginPath(),drawShapes()):(console.log("--- drawing ---- "),l.strokeStyle=eP.sender.strokeStyle,l.lineWidth=eP.sender.lineWidth,l.lineCap="round",l.lineTo(t.x,t.y)),l.stroke()},stopDrawing=e=>{e.preventDefault(),E.mousedown&&(console.log("--- stop drawing ---- "),sendStopDrawingEvent(),eM=!1,E.mousedown=!1,sendDrawEvent())};return t&&d===x.Qm.TRAINER&&(t.addEventListener("touchstart",startDrawing),t.addEventListener("touchmove",draw),t.addEventListener("touchend",stopDrawing),t.addEventListener("mousedown",startDrawing),t.addEventListener("mousemove",draw),t.addEventListener("mouseup",stopDrawing)),()=>{null==e||e.removeEventListener("play",drawFrame),cutCall()}},[]),(0,c.useMemo)(()=>{q.current&&f&&!q.current.srcObject&&(q.current.srcObject=f)},[f]);let initializeLocalStates=()=>{eF=[],a=null,eD=null},cutCall=()=>{console.log("--- cut call --- "),cleanupFunction(),h(),q&&q.current&&v.emit(Y.VIDEO_CALL.ON_CLOSE,{userInfo:{from_user:m._id,to_user:u._id}})},listenSocketEvents=()=>{v.on("ON_CALL_JOIN",e=>{let{userInfo:t}=e;console.log(" end user join --- ",t,X.current,m,u);let{to_user:l,from_user:n}=t;X&&X.current&&connectToPeer(X.current,n)}),v.on(Y.VIDEO_CALL.ON_OFFER,e=>{var t;console.log(" -- on OFFER --"),null===(t=X.current)||void 0===t||t.signal(e)}),v.on(Y.VIDEO_CALL.ON_ANSWER,e=>{var t;console.log(" -- on answer --"),null===(t=X.current)||void 0===t||t.signal(e)}),v.on(Y.VIDEO_CALL.ON_ICE_CANDIDATE,e=>{var t;console.log(" -- on ICE candidate --"),null===(t=X.current)||void 0===t||t.signal(e)}),v.on(Y.ON_CLEAR_CANVAS,()=>{clearCanvas()}),v.on(Y.VIDEO_CALL.MUTE_ME,e=>{let{muteStatus:t}=e;q.current&&q.current.srcObject&&(q.current.srcObject.getAudioTracks()[0].enabled=t)}),v.on(Y.VIDEO_CALL.STOP_FEED,e=>{let{feedStatus:t}=e;q.current&&q.current.srcObject&&(q.current.srcObject.getVideoTracks()[0].enabled=t)}),v.on(Y.EMIT_DRAWING_CORDS,e=>{let{strikes:t}=e,l=k.current,n=null==l?void 0:l.getContext("2d");if(!n||!l)return;let i=new Blob([t]),s=new Image;s.src=URL.createObjectURL(i),s.onload=()=>{n.clearRect(0,0,l.width,l.height),n.drawImage(s,0,0)}}),v.on(Y.ON_UNDO,e=>{let{sender:t,receiver:l}=e;eO.receiver=[],eO.sender=[],eO.sender=l,eO.receiver=t,undoDrawing({coordinates:t,theme:eP.receiver},{coordinates:l,theme:{lineWidth:eP.sender.lineWidth,strokeStyle:eP.sender.strokeStyle}},!1)}),v.on(Y.VIDEO_CALL.ON_CLOSE,()=>{w({showMsg:!0,msg:"".concat(null==u?void 0:u.fullname," left the meeting, redirecting back to home screen in 5 seconds...")}),cleanupFunction()})},getMosuePositionOnCanvas=e=>{if(e.clientX||e.clientY||(null==e?void 0:e.touches)&&(null==e?void 0:e.touches[0])){var t,l;let n=(null==e?void 0:e.clientX)||(null==e?void 0:null===(t=e.touches[0])||void 0===t?void 0:t.clientX),i=(null==e?void 0:e.clientY)||(null==e?void 0:null===(l=e.touches[0])||void 0===l?void 0:l.clientY),{offsetLeft:s,offsetTop:a}=e.target,o=n-(s||(eE.matches?100:50));return{x:o,y:i-a}}},clearCanvas=()=>{let e=k.current,t=null==e?void 0:e.getContext("2d");t&&e&&t.clearRect(0,0,e.width,e.height)},handleStartCall=()=>{console.log("--- handleStartCall ---");let startVideoCall=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).catch(e=>{R.Am.error("Please allow media permission to microphone and camera for video call..."),console.log("unable to access video call ---- ",e)});w({showMsg:!0,msg:"Waiting for ".concat(null==u?void 0:u.fullname,"  to join...")}),S.current.srcObject=e;let t=new o(m._id);X.current=t,t.on("open",e=>{v.emit("ON_CALL_JOIN",{userInfo:{from_user:m._id,to_user:u._id}}),console.log("My peer ID is: "+e)}),t.on("error",e=>{console.error("error ---",e)}),t.on("call",t=>{console.log("incoming call ----"),t.answer(e),t.on("stream",e=>{w({showMsg:!1,msg:""}),console.log("onCall: setting remoteStream here for initially connected user ---- "),j(e)})})}catch(e){R.Am.error("Please allow media permission to microphone and camera for video call..."),console.error("Error accessing media devices:",e)}};startVideoCall().then(()=>{})},connectToPeer=(e,t)=>{var l;console.log("Connecting to ".concat(t,"...")),S&&(null==S?void 0:S.current)&&e.call(t,null==S?void 0:null===(l=S.current)||void 0===l?void 0:l.srcObject).on("stream",e=>{console.log("setting remoteStream for 2nd user here ---- "),w({showMsg:!1,msg:""}),j(e)})},sendDrawEvent=()=>{let e=k.current;e&&e.toBlob(e=>{let t=new FileReader;t.onload=e=>{if(!(e&&e.target))return;let t=e.target.result;console.log("emit draw event---"),v.emit(Y.DRAW,{userInfo:{from_user:m._id,to_user:u._id},strikes:t})},t.readAsArrayBuffer(e)})},sendStopDrawingEvent=()=>{q&&q.current&&v.emit(Y.STOP_DRAWING,{userInfo:{from_user:m._id,to_user:u._id}})},sendClearCanvasEvent=()=>{q&&q.current&&v.emit(Y.EMIT_CLEAR_CANVAS,{userInfo:{from_user:m._id,to_user:u._id}})},cleanupFunction=()=>{!function(){if(X&&X.current)for(let e in console.log("peerRef.current.connections --- ",X.current.connections),X.current.connections)X.current.connections[e].forEach((e,t,l)=>{console.log("closing ".concat(e.connectionId," peerConnection (").concat(t+1,"/").concat(l.length,")"),e.peerConnection),e.peerConnection.close(),e.close&&e.close()})}();let e=S.current||a;if(S&&e&&e.srcObject){let t=e.srcObject.getTracks(),l=e.srcObject.getVideoTracks();for(let e=0;e<t.length;e++){let l=t[e];l.stop()}for(let e=0;e<l.length;e++){let t=l[e];t.stop()}}let t=q.current;if(q&&t&&t.srcObject){let e=t.srcObject.getTracks(),l=t.srcObject.getVideoTracks();for(let t=0;t<e.length;t++){let l=e[t];l.stop()}for(let e=0;e<l.length;e++){let t=l[e];t.stop()}}X.current&&(X.current.destroy(),X.current=null),clearCanvas()},eR=(0,c.useCallback)(B()(sendDrawEvent,500),[]),undoDrawing=async function(e,t){let l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=k.current,i=null==n?void 0:n.getContext("2d");i&&n&&(i.clearRect(0,0,n.width,n.height),l&&eO.sender.splice(-1,1),await e.coordinates.forEach(t=>{if(i.beginPath(),i.strokeStyle=e.theme.strokeStyle,i.lineWidth=e.theme.lineWidth,i.lineCap="round",t&&Array.isArray(t)){i.moveTo(t[0][0],t[0][1]);for(let e=0;e<t.length;e++)i.lineTo(t[e][0],t[e][1]);i.stroke()}}),await t.coordinates.forEach(e=>{if(i.beginPath(),i.strokeStyle=t.theme.strokeStyle,i.lineWidth=t.theme.lineWidth,i.lineCap="round",e&&Array.isArray(e)){i.moveTo(e[0][0],e[0][1]);for(let t=0;t<e.length;t++)i.lineTo(e[t][0],e[t][1]);i.stroke()}}),!(eF.length<=0)&&(i.putImageData(eF[eF.length-1],0,0),eF.pop(),l&&eR()))},getReportData=async()=>{var e,l,n,i=await (0,eI.QL)({sessions:t,trainer:null==m?void 0:m._id,trainee:null==u?void 0:u._id});ex(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.reportData),ep({title:null==i?void 0:null===(l=i.data)||void 0===l?void 0:l.title,topic:null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.description})},showReportData=async()=>{getReportData(),em(!0)},takeScreenshot=()=>{let e=document.body,l=document.querySelector(".creationBarItem"),n=document.querySelector(".call-action-buttons"),i=document.querySelector(".main-nav");l&&(l.style.transition="opacity 2s",l.style.opacity="0"),n&&(n.style.transition="opacity 2s",n.style.opacity="0"),i&&(i.style.transition="opacity 2s",i.style.opacity="0"),eC()(e,{useCORS:!0}).then(async e=>{let s=e.toDataURL("image/png");l&&(l.style.transition="opacity 2s",l.style.opacity="1"),n&&(n.style.transition="opacity 2s",n.style.opacity="1"),i&&(i.style.transition="opacity 2s",i.style.opacity="1");var a,o,r=await (0,eI.SU)({sessions:t,trainer:null==m?void 0:m._id,trainee:null==u?void 0:u._id});let c=await fetch(s).then(e=>e.blob());(null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.url)&&pushProfilePhotoToS3(null==r?void 0:null===(o=r.data)||void 0===o?void 0:o.url,c),R.Am.success("The screenshot taken successfully.",{type:"success"})})};async function pushProfilePhotoToS3(e,t){let l=new Headers({"Content-Type":"image/*"});return await eA().put(e,t,{headers:l}),!0}let eE=window.matchMedia("(min-width: 768px)");(0,c.useEffect)(()=>{v.emit(Y.ON_VIDEO_SELECT,{userInfo:{from_user:m._id,to_user:u._id},videos:A})},[null==A?void 0:A.length]),v.on(Y.ON_VIDEO_PLAY_PAUSE,e=>{var t,l,n,i,s,a,o,r;let{isPlayingAll:c,number:d,isPlaying1:m,isPlaying2:u}=e;"all"===d&&(c?(null==D||null===(n=D.current)||void 0===n||n.play(),null==P||null===(i=P.current)||void 0===i||i.play()):(null==D||null===(t=D.current)||void 0===t||t.pause(),null==P||null===(l=P.current)||void 0===l||l.pause())),"one"===d&&(m?null==D||null===(a=D.current)||void 0===a||a.play():null==D||null===(s=D.current)||void 0===s||s.pause()),"two"===d&&(u?null==P||null===(r=P.current)||void 0===r||r.play():null==P||null===(o=P.current)||void 0===o||o.pause()),Z({isPlayingAll:c,number:d,isPlaying1:m,isPlaying2:u})}),v.on(Y.ON_VIDEO_TIME,e=>{let{clickedTime:t,number:l}=e;D.current&&("one"===l?D.current.currentTime=t:P.current.currentTime=t)}),v.on(Y.ON_VIDEO_SELECT,e=>{let{videos:t}=e;O(t)}),v.on(Y.ON_VIDEO_SHOW,e=>{let{isClicked:t}=e;W(t)});let togglePlay=e=>{var t,l,n,i,s,a,o,r=L;r.number=e,"all"===e?(L.isPlayingAll?(null==D||null===(t=D.current)||void 0===t||t.pause(),null==P||null===(l=P.current)||void 0===l||l.pause()):(null==D||null===(n=D.current)||void 0===n||n.play(),null==P||null===(i=P.current)||void 0===i||i.play()),r={...L,isPlayingAll:!L.isPlayingAll,isPlaying1:!L.isPlayingAll,isPlaying2:!L.isPlayingAll}):"one"===e?(L.isPlaying1?null==D||null===(s=D.current)||void 0===s||s.pause():null==D||null===(a=D.current)||void 0===a||a.play(),r={...L,isPlaying1:!L.isPlaying1}):"two"===e&&((null==L?void 0:L.isPlaying2)?null==P||null===(o=P.current)||void 0===o||o.pause():P.current.play(),r={...L,isPlaying2:!L.isPlaying2}),null==v||v.emit(null==Y?void 0:Y.ON_VIDEO_PLAY_PAUSE,{userInfo:{from_user:null==m?void 0:m._id,to_user:null==u?void 0:u._id},...r}),Z({...r})},handleProgressBarClick=(e,t)=>{var l,n,i,s,a;"one"===t?(l=(null==e?void 0:null===(n=e.nativeEvent)||void 0===n?void 0:n.offsetX)/(null==M?void 0:null===(i=M.current)||void 0===i?void 0:i.offsetWidth)*(null==M?void 0:M.current.getAttribute("max")),D.current.currentTime=l):(l=(null==e?void 0:null===(s=e.nativeEvent)||void 0===s?void 0:s.offsetX)/(null==F?void 0:null===(a=F.current)||void 0===a?void 0:a.offsetWidth)*(null==F?void 0:F.current.getAttribute("max")),P.current.currentTime=l),null==v||v.emit(null==Y?void 0:Y.ON_VIDEO_TIME,{userInfo:{from_user:null==m?void 0:m._id,to_user:null==u?void 0:u._id},clickedTime:l,number:t})};(0,c.useEffect)(()=>{setScreenShot()},[null==ev?void 0:ev.length]);let setScreenShot=async()=>{var e=[];for(let t=0;t<(null==ev?void 0:ev.length);t++){let l=ev[t];try{let n=await fetch("https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==l?void 0:l.imageUrl)),i=await n.blob(),s=new FileReader;s.onloadend=()=>{let n=s.result.split(",")[1];e[t]={...l,imageUrl:"data:image/jpeg;base64,".concat(n)}},s.readAsDataURL(i)}catch(e){console.error("Error fetching or converting image:",e)}}ew([...e])};var eL,eZ,eH,eV,eJ=new eT.ZP;let generatePDF=async()=>{let e=document.getElementById("report-pdf");e.style.removeProperty("display"),eC()(e).then(async l=>{let n=l.toDataURL("image/png");var i=eJ.internal.pageSize.width,s=i/(l.width/l.height);eJ.addImage(n,"PNG",0,0,i,s);let a=eJ.output("dataurlstring"),o=atob(a.split(",")[1]),r=Array(o.length);for(let e=0;e<o.length;e++)r[e]=o.charCodeAt(e);let c=new Blob([new Uint8Array(r)],{type:"application/pdf"}),d=new File([c],"generated_pdf.pdf",{type:"application/pdf"});var h=await createUploadLink();h&&pushProfilePDFToS3(h,d),e.style.display="none",await (0,eI.Zn)({sessions:t,trainer:null==m?void 0:m._id,trainee:null==u?void 0:u._id,title:null==eg?void 0:eg.title,topic:null==eg?void 0:eg.topic,reportData:ev}),em(!1)})};async function pushProfilePDFToS3(e,t){let l=new Headers({"Content-Type":"application/pdf"});eA().put(e,t,{headers:l,onUploadProgress:e=>{let{loaded:t,total:l}=e;console.log("percentCompletedpercentCompleted",t/l*100)}}).then(e=>{console.log(e)}).catch(e=>{console.error("Error:",e)})}let createUploadLink=async()=>{let e=await getS3SignPdfUrl({session_id:t});return(null==e?void 0:e.url)?null==e?void 0:e.url:""},handleRemoveImage=async e=>{await (0,eI.CM)({sessions:t,trainer:null==m?void 0:m._id,trainee:null==u?void 0:u._id,filename:e}),getReportData()},handleCropImage=async(e,l)=>{var n,i,s=await (0,eI.xJ)({sessions:t,trainer:null==m?void 0:m._id,trainee:null==u?void 0:u._id,oldFile:e});(null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.url)&&await pushProfilePhotoToS3(null==s?void 0:null===(i=s.data)||void 0===i?void 0:i.url,l),getReportData(),eh(!1)};return(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)("canvas",{id:"drawing-canvas",width:null===(eL=document.getElementById("bookings"))||void 0===eL?void 0:eL.clientWidth,height:null===(eZ=document.getElementById("bookings"))||void 0===eZ?void 0:eZ.clientHeight,className:"canvas-print absolute all-0",ref:k,style:{left:0,top:0,width:"100%",height:"100%"}}),(0,r.jsxs)("div",{className:"row",style:{height:"100%",display:"flex",alignItems:"center"},children:[d===x.Qm.TRAINER?(0,r.jsx)("div",{className:"col-lg-1 col-md-1 col-sm-12 z-50",children:(0,r.jsx)("div",{children:(0,r.jsx)(CanvasMenuBar,{isOpen:U,setIsOpen:G,setSketchPickerColor:e=>{p(e)},undoDrawing:()=>{undoDrawing({coordinates:eO.sender,theme:eP.sender},{coordinates:eO.receiver,theme:{lineWidth:eP.receiver.lineWidth,strokeStyle:eP.receiver.strokeStyle}})},sketchPickerColor:g,canvasConfigs:eP,setCanvasConfigs:e=>{eP=e},drawShapes:e=>{eD=e},refreshDrawing:()=>{eO.sender=[],eO.receiver=[],clearCanvas(),sendClearCanvasEvent()},selectedClips:A,setSelectedClips:O,toUser:u})})}):(0,r.jsx)("div",{className:"col-lg-1 col-md-6 col-sm-12 "}),(0,r.jsxs)("div",{className:"col-lg-8 col-md-8 col-sm-12 ",id:"third",style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"space-around",flexDirection:"column"},children:[(0,r.jsx)("div",{className:"no-user-joined font-weight-bold text-center",style:{margin:(null==C?void 0:C.msg)?"auto":"",zIndex:(null==C?void 0:C.msg)?8:1},children:null==C?void 0:C.msg}),(null==A?void 0:A.length)!=0&&(0,r.jsxs)("div",{className:"row",style:eE.matches?{height:"33vw"}:{},children:[(0,r.jsxs)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:[(0,r.jsx)("video",{style:{height:"25vw",width:"inherit",borderRadius:10},ref:D,onTimeUpdate:()=>{var e,t,l,n,i;M.current.value=(null==D?void 0:null===(e=D.current)||void 0===e?void 0:e.currentTime)||0,D.current.duration===D.current.currentTime&&(togglePlay("one"),D.current.currentTime=0,null==v||v.emit(null==Y?void 0:Y.ON_VIDEO_TIME,{userInfo:{from_user:null==m?void 0:m._id,to_user:null==u?void 0:u._id},clickedTime:0,number:"one"}));let s=D.current.duration-D.current.currentTime;V({...H,currentTime1:"".concat(String(null===(t=Math)||void 0===t?void 0:t.floor(M.current.value/60)).padStart(2,"0"),":").concat(String(null===(l=Math)||void 0===l?void 0:l.floor(M.current.value%60)).padStart(2,"0")),remainingTime1:"".concat(String(null===(n=Math)||void 0===n?void 0:n.floor(s/60)).padStart(2,"0"),":").concat(String(null===(i=Math)||void 0===i?void 0:i.floor(s%60)).padStart(2,"0"))})},children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null===(eH=A[0])||void 0===eH?void 0:eH._id),type:"video/mp4"})}),(0,r.jsxs)("div",{style:{position:"relative",zIndex:9999,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{margin:0,marginRight:"10px"},children:null==H?void 0:H.currentTime1})," "]}),(0,r.jsx)("div",{className:"external-control-bar",children:(0,r.jsx)("button",{className:"btn btn-primary px-1 py-1 my-3 mr-2",onClick:()=>togglePlay("one"),children:(null==L?void 0:L.isPlaying1)?(0,r.jsx)(ea.Z,{style:{verticalAlign:"middle"}}):(0,r.jsx)(eo.Z,{style:{verticalAlign:"middle"}})})}),(0,r.jsx)("progress",{className:"progress",ref:M,value:"0",max:D.current?D.current.duration:100,onClick:e=>handleProgressBarClick(e,"one")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{margin:0,marginLeft:"10px"},children:null==H?void 0:H.remainingTime1})," "]})]})]}),(0,r.jsxs)("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12",children:[(0,r.jsx)("video",{style:{height:"25vw",width:"inherit",borderRadius:10},ref:P,onTimeUpdate:()=>{var e,t,l,n,i;F.current.value=(null==P?void 0:null===(e=P.current)||void 0===e?void 0:e.currentTime)||0,P.current.duration===P.current.currentTime&&(togglePlay("two"),P.current.currentTime=0,null==v||v.emit(null==Y?void 0:Y.ON_VIDEO_TIME,{userInfo:{from_user:null==m?void 0:m._id,to_user:null==u?void 0:u._id},clickedTime:0,number:"two"}));let s=P.current.duration-P.current.currentTime;V({...H,currentTime2:"".concat(String(null===(t=Math)||void 0===t?void 0:t.floor(F.current.value/60)).padStart(2,"0"),":").concat(String(null===(l=Math)||void 0===l?void 0:l.floor(F.current.value%60)).padStart(2,"0")),remainingTime2:"".concat(String(null===(n=Math)||void 0===n?void 0:n.floor(s/60)).padStart(2,"0"),":").concat(String(null===(i=Math)||void 0===i?void 0:i.floor(s%60)).padStart(2,"0"))})},children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null===(eV=A[1])||void 0===eV?void 0:eV._id),type:"video/mp4"})}),(0,r.jsxs)("div",{style:{position:"relative",zIndex:9999,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{margin:0,marginRight:"10px"},children:null==H?void 0:H.currentTime2})," "]}),(0,r.jsx)("div",{className:"external-control-bar",children:(0,r.jsx)("button",{className:"btn btn-primary px-1 py-1 my-3 mr-2 ",onClick:()=>togglePlay("two"),children:(null==L?void 0:L.isPlaying2)?(0,r.jsx)(ea.Z,{style:{verticalAlign:"middle"}}):(0,r.jsx)(eo.Z,{style:{verticalAlign:"middle"}})})}),(0,r.jsx)("progress",{className:"progress",ref:F,value:"0",max:P.current?P.current.duration:100,onClick:e=>handleProgressBarClick(e,"two")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{margin:0,marginLeft:"10px"},children:null==H?void 0:H.remainingTime2})," "]})]})]})]}),(0,r.jsx)("div",{className:(null==A?void 0:A.length)!=0&&eE.matches&&"scs",children:(0,r.jsx)("video",{ref:q,playsInline:!0,autoPlay:!0,className:"rounded ",style:{width:"100%",height:(null==A?void 0:A.length)===0&&450},id:"end-user-video"})}),(0,r.jsx)("div",{className:eE.matches&&"scs2",children:S&&(0,r.jsx)("video",{id:"end-user-video",playsInline:!0,muted:!0,className:"rounded ",style:{width:"100%"},ref:S,autoPlay:!0})}),(0,r.jsxs)("div",{className:"call-action-buttons z-50 my-3 ",children:[(0,r.jsx)("div",{className:"icon-btn ".concat(b?"btn-danger":"btn-light"," ").concat(eE.matches?"btn-xl":"btn-sm"," button-effect mic"),onClick:()=>{q&&q.current&&(v.emit(Y.VIDEO_CALL.MUTE_ME,{userInfo:{from_user:m._id,to_user:u._id},isClicked:!b}),y(!b))},children:(0,r.jsx)(K.Z,{})}),(0,r.jsx)("div",{className:"icon-btn btn-light  button-effect ".concat(eE.matches?"btn-xl":"btn-sm"," ml-3"),onClick:()=>{if(_(!N),S.current&&S.current.srcObject){let e=S.current.srcObject.getTracks(),t=S.current.srcObject.getVideoTracks();for(let t=0;t<e.length;t++){let l=e[t];l.enabled=N}for(let e=0;e<t.length;e++){let l=t[e];l.enabled=N}}q&&q.current&&v.emit(Y.VIDEO_CALL.STOP_FEED,{userInfo:{from_user:m._id,to_user:u._id},feedStatus:N})},children:N?(0,r.jsx)(et.Z,{}):(0,r.jsx)(ee.Z,{})}),(0,r.jsx)("div",{className:"icon-btn btn-danger button-effect ".concat(eE.matches?"btn-xl":"btn-sm","  ml-3"),onClick:()=>{cutCall()},children:(0,r.jsx)(el.Z,{})}),!(null==C?void 0:C.showMsg)&&d===x.Qm.TRAINER&&(0,r.jsx)("div",{className:J?"icon-btn btn-danger  button-effect  ".concat(eE.matches?"btn-xl":"btn-sm","  ml-3"):"icon-btn btn-light  button-effect  ".concat(eE.matches?"btn-xl":"btn-sm","  ml-3"),onClick:()=>{(null==A?void 0:A.length)?Q(!0):G(!0)},children:(0,r.jsx)(en.Z,{})}),(null==A?void 0:A.length)&&d===x.Qm.TRAINER?(0,r.jsx)("div",{className:"icon-btn btn-light  button-effect ".concat(eE.matches?"btn-xl":"btn-sm"," ml-3"),onClick:()=>{togglePlay("all")},children:(null==L?void 0:L.isPlayingAll)?(0,r.jsx)(ee.Z,{}):(0,r.jsx)(et.Z,{})}):(0,r.jsx)(r.Fragment,{}),d===x.Qm.TRAINER?(0,r.jsx)("div",{className:"icon-btn btn-light  button-effect ".concat(eE.matches?"btn-xl":"btn-sm"," ml-3"),onClick:()=>{takeScreenshot()},children:(0,r.jsx)(ei.Z,{})}):(0,r.jsx)(r.Fragment,{}),d===x.Qm.TRAINER?(0,r.jsx)("div",{className:"icon-btn btn-light  button-effect ".concat(eE.matches?"btn-xl":"btn-sm"," ml-3"),onClick:showReportData,children:(0,r.jsx)(es.Z,{})}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)(ef.Z,{isOpen:z,toggle:()=>{Q(!1)},children:[(0,r.jsx)(ej.Z,{toggle:()=>{Q(!1)},close:()=>(0,r.jsx)(r.Fragment,{}),children:"Confirm"}),(0,r.jsx)(eb.Z,{children:"Are you sure you want to exit clip analysis mode?"}),(0,r.jsxs)(ey.Z,{children:[(0,r.jsx)(eN.Z,{color:"primary",onClick:()=>{O([]),Q(!1)},children:"Confirm"})," ",(0,r.jsx)(eN.Z,{color:"secondary",onClick:()=>{Q(!1)},children:"Cancel"})]})]})]})]}),(0,r.jsx)(I.Z,{isOpen:ed,element:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{id:"generate-report",className:"container media-gallery portfolio-section grid-portfolio",children:[(0,r.jsxs)("div",{className:"theme-title  mb-5",children:[(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsx)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{em(!1)},children:(0,r.jsx)(T.Z,{})})}),(0,r.jsx)("div",{className:"media d-flex flex-column  align-items-center",children:(0,r.jsx)("div",{children:(0,r.jsx)("h2",{children:"Report"})})})]}),(0,r.jsxs)("div",{className:"theme-tab",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6 col-sm-12 col-xs-12 p-2",children:(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"col-form-label",children:"Title"}),(0,r.jsx)("input",{className:"form-control",type:"text",name:"title",placeholder:"Title",onChange:e=>{eg.title=e.target.value,ep({...eg})},value:eg.title})]})}),(0,r.jsx)("div",{className:"col-md-6 col-sm-12 col-xs-12 p-2",children:(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"col-form-label",children:"Description"}),(0,r.jsx)("input",{className:"form-control",type:"text",name:"topic",placeholder:"Topic",onChange:e=>{eg.topic=e.target.value,ep({...eg})},value:eg.topic})]})}),null==ev?void 0:ev.map((e,t)=>{var l,n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"col-md-6 col-sm-12 col-xs-12 p-2",style:{position:"relative"},children:[(0,r.jsx)("img",{style:{width:"100%",height:"100%",maxHeight:"280px",border:"1px solid #ced4da",marginTop:"10px"},src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==e?void 0:e.imageUrl),alt:"Screen Shot"}),(0,r.jsx)("div",{style:{position:"absolute",bottom:0},children:(0,r.jsx)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{ek(t),eh(!0)},children:(0,r.jsx)(er.Z,{})})})]}),(0,r.jsxs)("div",{className:"col-md-6 col-sm-12 col-xs-12 p-2",children:[(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsx)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{handleRemoveImage(null==e?void 0:e.imageUrl)},children:(0,r.jsx)(ec.Z,{})})}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"col-form-label",children:"Title"}),(0,r.jsx)("input",{className:"form-control",type:"text",name:"title",placeholder:"Title",onChange:e=>{ev[t].title=e.target.value,ex([...ev])},value:null===(l=ev[t])||void 0===l?void 0:l.title}),(0,r.jsx)("label",{className:"col-form-label",children:"Description"}),(0,r.jsx)("textarea",{rows:"4",className:"form-control",type:"text",name:"description",placeholder:"Description",onChange:e=>{ev[t].description=e.target.value,ex([...ev])},value:null===(n=ev[t])||void 0===n?void 0:n.description})]})]})]})})]}),(0,r.jsx)("div",{className:"d-flex justify-content-center w-100 p-3",children:(0,r.jsx)(eN.Z,{className:"mx-3",color:"primary",onClick:()=>{generatePDF()},children:"Save"})})]}),(0,r.jsxs)("div",{id:"report-pdf",style:{display:"none",padding:"30px 0px"},children:[(0,r.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,r.jsx)("p",{style:{textTransform:"uppercase",marginTop:"0px",fontSize:"40px",fontWeight:"600"},children:"Game Plan"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{style:{margin:"0px"},children:["Topic: ",null==eg?void 0:eg.title]}),(0,r.jsxs)("h2",{style:{margin:"0px"},children:["NAME: ",null==eg?void 0:eg.topic]})]}),(0,r.jsx)("hr",{style:{borderWidth:"2px",borderStyle:"solid",borderColor:"brown"}}),null==e_?void 0:e_.map((e,t)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",alignItems:"center"},children:[(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)("img",{src:null==e?void 0:e.imageUrl,alt:"image",style:{height:"260px",width:"240px",objectFit:"cover"}})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{style:{fontSize:"30px",fontWeight:"600",margin:"0px"},children:["TIP #",t+1," ",null==e?void 0:e.title]}),(0,r.jsx)("p",{children:null==e?void 0:e.description})]})]}),(0,r.jsx)("hr",{style:{borderWidth:"2px",borderStyle:"solid",borderColor:"brown"}})]}))]})]}),(0,r.jsx)(cropimage,{isOpenCrop:eu,setIsOpenCrop:eh,selectImage:eS,screenShots:ev,setScreenShots:ex,handleCropImage:handleCropImage})]})})]})]})};var start=e=>{let{id:t,isClose:l,accountType:n,traineeInfo:i,trainerInfo:s}=e,a=(0,c.useContext)($.J);a.on(Y.VIDEO_CALL.ON_CLOSE,()=>{setTimeout(()=>{l()},3e3)});let o=window.matchMedia("(min-width: 768px)");return(0,r.jsx)("div",{className:o.matches?"mr-3 full-height":"mr-3",children:(0,r.jsx)(HandleVideoCall,{id:t,isClose:l,accountType:n,fromUser:n===x.Qm.TRAINEE?i:s,toUser:n===x.Qm.TRAINEE?s:i})})},eL=l(99469),eZ=l(16310),eH=l(37442),eV=l(90529),rating=e=>{let{onChange:t,key:l,initialRating:n}=e;return(0,r.jsx)(eL.Z,{initialRating:n,start:0,stop:5,emptySymbol:["fa fa-star-o fa-2x mediumRating","fa fa-star-o fa-2x mediumRating","fa fa-star-o fa-2x mediumRating","fa fa-star-o fa-2x mediumRating","fa fa-star-o fa-2x mediumRating","fa fa-star-o fa-2x mediumRating"],fullSymbol:["fa fa-star fa-2x mediumRating","fa fa-star fa-2x mediumRating","fa fa-star fa-2x mediumRating","fa fa-star fa-2x mediumRating","fa fa-star fa-2x mediumRating","fa fa-star fa-2x mediumRating"],fractions:2,onChange:e=>{t(e)}},l)},ratings=e=>{let{onClose:t,booking_id:l,accountType:n,tabBook:i}=e,s=(0,h.TL)(),a=(0,c.useRef)(null),o=eZ.Ry().shape({accountType:eZ.Z_().default(n),sessionRating:eZ.Rx().nullable().required(x.hv.rating.sessionRating),audioVideoRating:eZ.Rx().nullable().required(x.hv.rating.audioVideoRating),recommendRating:eZ.Rx().when("accountType",(e,t)=>{let[l]=e;return l!==x.Qm.TRAINER?eZ.Rx().nullable().required(x.hv.rating.recommandRating):eZ.Rx().nullable().optional()}),title:eZ.Z_().nullable().required(x.hv.rating.title),remarksInfo:eZ.Z_().nullable().required(x.hv.rating.remarksInfo)});return(0,r.jsx)(eH.J9,{innerRef:a,initialValues:{sessionRating:null,audioVideoRating:null,recommendRating:null,title:"",remarksInfo:""},validationSchema:o,onSubmit:e=>{let t={id:l,booked_status:x.Jl.completed},a={...e,booking_id:l},o={...n===x.Qm.TRAINER?{status:i,updatePayload:t}:{updatePayload:t}};s((0,W.kG)(o)),s((0,W.XG)(a))},children:e=>{let{values:l,errors:i,touched:s,handleSubmit:a,handleBlur:o,setValues:c,isValid:d}=e;return(0,r.jsx)(eH.l0,{onSubmit:a,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"d-flex justify-content-end",children:(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsx)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:t,children:(0,r.jsx)(T.Z,{})})})}),(0,r.jsx)("h3",{className:"fs-1 p-3 mb-2 rounded",children:x.v0.successMessage.rating}),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("h4",{className:"col-8",children:"How was your session?"}),(0,r.jsx)("div",{className:"col",children:(0,r.jsx)(rating,{initialRating:l.sessionRating,onChange:e=>{c({...l,sessionRating:e})}},"sessionRating")})]}),(0,r.jsx)("div",{children:(0,r.jsx)(eV.X,{isError:i.sessionRating,isTouched:!!s.sessionRating&&!!i.sessionRating})}),(0,r.jsxs)("div",{className:"row mt-3 mb-3",children:[(0,r.jsx)("h4",{className:"col-8",children:"Please rate Audio/Video connection"}),(0,r.jsx)("div",{className:"col",children:(0,r.jsx)(rating,{initialRating:l.audioVideoRating,onChange:e=>{c({...l,audioVideoRating:e})}},"audioVideoRating")})]}),(0,r.jsx)("div",{children:(0,r.jsx)(eV.X,{isError:i.audioVideoRating,isTouched:!!s.audioVideoRating&&!!i.audioVideoRating})}),n===x.Qm.TRAINER?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"row mt-3 mb-3",children:[(0,r.jsx)("h4",{className:"col-8",children:"How strongly would you like to recommend?"}),(0,r.jsx)("div",{className:"col",children:(0,r.jsx)(rating,{initialRating:l.recommendRating,onChange:e=>{c({...l,recommendRating:e})}},"recommandRating")})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(eV.X,{isError:i.recommendRating,isTouched:!!s.recommendRating&&!!i.recommendRating})})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("input",{className:"form-control",placeholder:"Title",value:l.title,onBlur:o,onChange:e=>{let{value:t}=e.target;c({...l,title:t})}})})})}),(0,r.jsx)("div",{children:(0,r.jsx)(eV.X,{isError:i.title,isTouched:!!s.title&&!!i.title})}),(0,r.jsx)("div",{className:"row mt-2",children:(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("textarea",{onChange:e=>{let{value:t}=e.target;c({...l,remarksInfo:t})},value:l.remarksInfo,placeholder:"Add remarks",onBlur:o,className:"form-control mt-1",name:"",id:"",cols:"10",rows:"4"})})})}),(0,r.jsx)("div",{children:(0,r.jsx)(eV.X,{isError:i.remarksInfo,isTouched:!!s.remarksInfo&&!!i.remarksInfo})}),(0,r.jsx)("div",{className:"d-flex justify-content-center mt-4",children:(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})})}})},eJ=l(94184),eW=l.n(eJ),eU=l(59597);let{isMobileFriendly:eB,isSidebarToggleEnabled:eG}=W.bookingsAction;var bookings=e=>{let{accountType:t=null}=e;(0,X.useRouter)();let l=(0,h.TL)(),{handleActiveTab:n,handleSidebarTabClose:i}=W.bookingsAction,{newBookingData:s}=(0,h.CG)(N.F),{isLoading:a,configs:o}=(0,h.CG)(W.fG),{userInfo:d}=(0,h.CG)(v.fD),[m,u]=(0,c.useState)({id:"",booked_status:""}),[g,p]=(0,c.useState)(x.NT[0]),[f,j]=(0,c.useState)({trainerInfo:null,traineeInfo:null,id:null,isOpenModal:!1});(0,c.useContext)($.J);let{removeNewBookingData:b}=N.traineeAction,{activeTab:S}=(0,h.CG)(W.fG),{scheduledMeetingDetails:k,addRatingModel:R}=(0,h.CG)(W.fG),{addRating:E}=W.bookingsAction,[A,O]=(0,c.useState)(x.NT[0]),[D,F]=(0,c.useState)(!1),[L,Z]=(0,c.useState)(!1),[H,V]=(0,c.useState)(""),[J,U]=(0,c.useState)(""),[B,G]=(0,c.useState)([]),[z,Q]=(0,c.useState)([]);(0,c.useEffect)(()=>{getMyClips()},[]),(0,c.useEffect)(()=>{(null==s?void 0:s._id)&&(U(null==s?void 0:s._id),F(!0))},[s]),console.log("isOpenID",J,s);let getMyClips=async()=>{var e=await (0,ep.c)({});G(null==e?void 0:e.data)},toggle1=e=>{S!==e&&O(e)};(0,c.useEffect)(()=>{t===x.Qm.TRAINER?g&&l((0,W.$h)({status:g})):l((0,W.$h)())},[g]),(0,c.useEffect)(()=>{if(m.id){let e={id:m.id,booked_status:m.booked_status},n={...t===x.Qm.TRAINER?{status:g,updatePayload:e}:{updatePayload:e}};l((0,W.kG)(n))}},[m,t]);let addTraineeClipInBookedSession=async()=>{let e={id:J,trainee_clip:null==z?void 0:z.map(e=>null==e?void 0:e._id)};l((0,W.Br)(e)),l(b()),F(!1)},handleAddRatingModelState=e=>{l(E(e))},isMeetingCompleted=e=>e.status===x.Jl.completed||e&&e.ratings&&e.ratings[t.toLowerCase()]&&e.ratings[t.toLowerCase()].sessionRating,renderBooking=(e,l,n,i,s,a,o,r,c,d,m)=>{let u=y.c.meetingAvailability(n,i,s),{isStartButtonEnabled:h,has24HoursPassedSinceBooking:v,isCurrentDateBefore:g,isUpcomingSession:p}=u,f=isMeetingCompleted(k[l])||v;switch(t){case x.Qm.TRAINER:return TrainerRenderBooking(a,e,o,r,g,h,f,p,c,d,z,Q,m);case x.Qm.TRAINEE:return TraineeRenderBooking(a,e,o,r,g,h,f,p,c,l,v,D,F,B,G,z,Q,U,addTraineeClipInBookedSession,d,m)}},TrainerRenderBooking=(e,t,l,n,i,s,a,o,d,h,v,g,p)=>(0,r.jsxs)(c.Fragment,{children:[t!==x.Jl.canceled&&a&&(0,r.jsx)("h3",{className:"mt-1",children:"Completed"}),(0,r.jsxs)("span",{className:"px-2",children:[(0,r.jsxs)("span",{children:[null==l?void 0:l.fullname," share video clips with you "]}),(0,r.jsx)("span",{onClick:()=>{(null==h?void 0:h.length)>0&&g(h),U(e),F(!0)},style:{textDecoration:"underline",cursor:"pointer"},children:"click here"})," to view Clip"]}),t===x.Jl.canceled&&a&&(0,r.jsx)("button",{className:"btn btn-danger button-effect btn-sm ml-4",type:"button",style:{cursor:t===x.Jl.canceled?"not-allowed":"pointer"},disabled:t===x.Jl.canceled,children:t===x.Jl.canceled?x.Jl.canceled:"Cancel"}),o||i||t!==x.Jl.confirmed||s||a?(0,r.jsx)(c.Fragment,{children:!a&&(0,r.jsxs)(c.Fragment,{children:[t!==x.Jl.canceled&&(0,r.jsx)("button",{className:"btn btn-primary button-effect btn-sm mr-2 btn_cancel",type:"button",style:{cursor:t===x.Jl.confirmed&&"not-allowed"},disabled:t===x.Jl.confirmed,onClick:()=>u({...m,id:e,booked_status:x.Jl.confirmed}),children:t===x.Jl.confirmed?x.Jl.confirmed:x.Jl.confirm}),t===x.Jl.confirmed&&(0,r.jsx)("button",{className:"btn btn-primary button-effect btn-sm mr-2 btn_cancel",type:"button",disabled:!s,style:{cursor:s?"pointer":"not-allowed"},onClick:()=>{j({...f,id:e,isOpenModal:!0,traineeInfo:l,trainerInfo:n})},children:x.Jl.start}),(0,r.jsx)("button",{className:"btn btn-danger button-effect btn-sm btn_cancel",type:"button",style:{cursor:t===x.Jl.canceled||s?"not-allowed":"pointer"},disabled:t===x.Jl.canceled||s,onClick:()=>{s||t!==x.Jl.booked&&t!==x.Jl.confirmed||u({...m,id:e,booked_status:x.Jl.canceled})},children:t===x.Jl.canceled?x.Jl.canceled:"Cancel"})]})}):(0,r.jsx)("button",{className:"btn btn-success button-effect btn-sm mr-4",type:"button",onClick:()=>{handleAddRatingModelState({_id:e,isOpen:!0,booking_id:e})},children:"Rating"}),p&&(0,r.jsx)("button",{className:"btn btn-success button-effect btn-sm ml-2",type:"button",onClick:()=>{V(p),Z(!0)},children:"Report"}),(0,r.jsx)(I.Z,{isOpen:D,element:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container media-gallery portfolio-section grid-portfolio ",children:[(0,r.jsx)("div",{className:"theme-title",children:(0,r.jsx)("div",{className:"media",children:(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsxs)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{F(!1)},children:[" ",(0,r.jsx)(T.Z,{})," "]})})})}),(0,r.jsxs)("div",{className:"d-flex flex-column  align-items-center",children:[(0,r.jsxs)("h1",{className:"p-3",children:[l.fullname," share video clips with you."]}),(null==v?void 0:v.length)?(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"block-content",children:(0,r.jsx)("div",{className:"row",children:v.map((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"col-md-6 col-sm-12 col-xs-12 p-2",children:[(0,r.jsx)("video",{className:"videoStyle",controls:!0,preload:"metadata",children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==e?void 0:e._id,"#t=0.01"),type:"video/mp4"})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("dl",{className:"row",children:[(0,r.jsx)("dd",{className:"ml-3",children:"Title :"}),(0,r.jsx)("dt",{className:"ml-1",children:(null==e?void 0:e.title)||"-"})]})})]},t)}))})})}):(0,r.jsx)(r.Fragment,{})]}),(0,r.jsx)("div",{className:"justify-content-center"})]})})})]}),TraineeRenderBooking=(e,t,n,i,s,a,o,d,h,v,g,p,y,N,_,C,w,S,R,E,A)=>{var O,D;let P=g||(null===(D=k[v])||void 0===D?void 0:null===(O=D.ratings)||void 0===O?void 0:O.trainee),M=!d&&!s&&!a&&t!==x.Jl.booked&&!P;return(0,r.jsxs)(c.Fragment,{children:[P?(0,r.jsx)("h3",{children:"Completed"}):null,M?(0,r.jsx)("button",{className:"btn btn-success button-effect btn-sm mr-4",type:"button",onClick:()=>{handleAddRatingModelState({_id:e,isOpen:!0})},children:"Rating"}):(0,r.jsx)(c.Fragment,{children:!o&&(0,r.jsxs)(c.Fragment,{children:[t!==x.Jl.canceled&&(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)("button",{className:"btn btn-success button-effect btn-sm mr-4 btn_cancel",type:"button",onClick:()=>{(null==E?void 0:E.length)>0&&w(E),S(e),y(!0)},children:"Add Clip"}),t===x.Jl.booked?(0,r.jsx)("button",{className:"btn btn-dark button-effect btn-sm mr-4 btn_cancel",type:"button",style:{cursor:t===x.Jl.booked&&"not-allowed"},disabled:t===x.Jl.booked,children:x.Jl.booked}):(0,r.jsx)("button",{className:"btn btn-primary button-effect btn-sm mr-4",type:"button",style:{cursor:t===x.Jl.confirmed&&"not-allowed"},disabled:t===x.Jl.confirmed,children:x.Jl.confirmed}),(0,r.jsx)(I.Z,{isOpen:p,element:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"theme-title",children:(0,r.jsx)("div",{className:"media",children:(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsxs)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{y(!1),l(b())},children:[" ",(0,r.jsx)(T.Z,{})," "]})})})}),(0,r.jsxs)("div",{className:"container media-gallery portfolio-section grid-portfolio ",children:[(0,r.jsxs)("h2",{className:"my-5",children:["Select any 2 clips to share it with ",null==i?void 0:i.fullname,"."]}),(null==C?void 0:C.length)?(0,r.jsxs)("div",{children:[(0,r.jsxs)("h5",{className:"block-title p-0",children:[" Selected Clips",(0,r.jsx)("label",{className:"badge badge-primary sm ml-2",children:null==C?void 0:C.length})]}),(0,r.jsx)("div",{className:"block-content",children:(0,r.jsx)("div",{className:"row",children:null==C?void 0:C.map((e,t)=>(0,r.jsxs)("div",{style:{borderRadius:5,position:"relative",border:"1px solid #ebebeb",marginLeft:"15px"},className:"col-5",children:[(0,r.jsx)("video",{style:{width:"100%",maxHeight:"200px",height:"100%"},preload:"metadata",children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==e?void 0:e._id,"#t=0.01"),type:"video/mp4"})}),(0,r.jsx)("span",{style:{position:"absolute",right:-5,top:-3,cursor:"pointer",background:"red",borderRadius:"50%",padding:"0px 6px",color:"#fff"},onClick:()=>{var t=JSON.parse(JSON.stringify(C));w([]),w(t=t.filter(t=>t._id!==(null==e?void 0:e._id)))},children:"x"})]},t))})})]}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("div",{style:{marginTop:"30px"}}),(null==N?void 0:N.length)&&(null==N?void 0:N.map((e,t)=>{var l;return(0,r.jsxs)("div",{className:"collapse-block ".concat((null==e?void 0:e.show)?"":"open"),children:[(0,r.jsxs)("h5",{className:"block-title pb-0",children:[" ",null==e?void 0:e._id,(0,r.jsx)("label",{className:"badge badge-primary sm ml-2",children:null==e?void 0:null===(l=e.clips)||void 0===l?void 0:l.length})]}),(0,r.jsx)("div",{className:"block-content ".concat((null==e?void 0:e.show)?"d-none":""),children:(0,r.jsx)("div",{className:"row",children:null==e?void 0:e.clips.map((e,t)=>{var l=C.find(t=>(null==t?void 0:t._id)===(null==e?void 0:e._id));return(0,r.jsx)("div",{className:"col-4 ",style:{borderRadius:5},onClick:()=>{!l&&(null==C?void 0:C.length)<2&&(null==C||C.push(e),w([...C]))},children:(0,r.jsx)("video",{style:{border:"".concat(l?"2px":"0px"," solid green"),width:"98%",maxHeight:"150px",height:"100%"},preload:"metadata",children:(0,r.jsx)("source",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(null==e?void 0:e._id,"#t=0.01"),type:"video/mp4"})})},t)})})})]})}))]}),(0,r.jsx)("div",{className:"d-flex justify-content-around w-100 p-3",children:(0,r.jsx)(eN.Z,{color:"success",onClick:()=>{R()},children:"Share"})})]})})]}),t===x.Jl.confirmed&&(0,r.jsx)("button",{className:"btn btn-primary button-effect btn-sm mr-4",type:"button",disabled:!a,style:{cursor:a?"pointer":"not-allowed"},onClick:()=>{j({...f,id:e,isOpenModal:!0,traineeInfo:n,trainerInfo:i})},children:x.Jl.start}),(0,r.jsx)("button",{className:"btn btn-danger button-effect btn-sm btn_cancel",type:"button",style:{cursor:t===x.Jl.canceled||a?"not-allowed":"pointer"},disabled:t===x.Jl.canceled||a,onClick:()=>{a||t!==x.Jl.booked&&t!==x.Jl.confirmed||u({...m,id:e,booked_status:x.Jl.canceled})},children:t===x.Jl.canceled?x.Jl.canceled:"Cancel"})]})}),A&&(0,r.jsx)("button",{className:"btn btn-success button-effect btn-sm ml-2",type:"button",onClick:()=>{V(A),Z(!0)},children:"Report"})]})},showRatingLabel=e=>e&&e[t.toLowerCase()]&&(e[t.toLowerCase()].sessionRating||e[t.toLowerCase()].sessionRating)?(0,r.jsxs)("div",{className:"d-flex items-center",children:[" ","You rated"," ",(0,r.jsx)("b",{className:"pl-2",children:e[t.toLowerCase()].sessionRating||e[t.toLowerCase()].sessionRating}),(0,r.jsx)(P.Z,{color:"#FFC436",size:28,className:"star-container star-svg"})," ","to this ",null==t?void 0:t.toLowerCase(),"."]}):null,Bookings=()=>k.map((e,t)=>{let{_id:l,trainee_info:n,trainer_info:i,booked_date:s,session_start_time:a,session_end_time:o,status:c,ratings:d,trainee_clips:m,report:u}=e;return(0,r.jsxs)("div",{className:"card mb-4 mt-5 trainer-bookings-card",children:[(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("dl",{className:"row",children:[(0,r.jsx)("dd",{className:"ml-3",children:"Trainer :"}),(0,r.jsx)("dt",{className:"ml-1",children:i.fullname})]})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("dl",{className:"row ml-1",children:[(0,r.jsx)("dd",{children:"Date :"}),(0,r.jsx)("dt",{className:"ml-1",children:y.c.getDateInFormat(s)})]})}),(0,r.jsx)("div",{className:"w-100"}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("dl",{className:"row",children:[(0,r.jsx)("dd",{className:"ml-3",children:"Trainee :"}),(0,r.jsx)("dt",{className:"ml-1",children:n.fullname})]})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("dl",{className:"row",children:[(0,r.jsx)("dd",{className:"ml-3",children:"Time Durations :"}),(0,r.jsx)("dt",{className:"ml-1",children:"".concat(y.c.convertToAmPm(a),"-").concat(y.c.convertToAmPm(o))})]})})]})}),(0,r.jsx)("div",{className:"card-footer",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-11",children:showRatingLabel(d)}),(0,r.jsx)("div",{className:"col-12 col-lg-auto ml-lg-auto",children:renderBooking(c,t,s,a,o,l,n,i,d,m,u)})]})})]},"booking-schedule-training".concat(t))}),q=window.matchMedia("(min-width: 992px)");return(0,r.jsxs)(c.Fragment,{children:[f.isOpenModal?(0,r.jsx)("div",{id:"bookings",className:q.matches?"video_call custom-scroll position-relative":"custom-scroll scoll-content position-relative",onScroll:()=>{o.sidebar.isMobileMode&&l(eG(!0))},children:(0,r.jsx)(start,{id:f.id,accountType:t,traineeInfo:f.traineeInfo,trainerInfo:f.trainerInfo,isClose:()=>{j({...f,id:null,isOpenModal:!1,traineeInfo:null,trainerInfo:null})}})}):(0,r.jsxs)("div",{id:"bookings",onScroll:()=>{o.sidebar.isMobileMode&&l(eG(!0))},className:"bookings custom-scroll custom-sidebar-content-booking ".concat(o.sidebar.isMobileMode&&o.sidebar.isToggleEnable&&"submenu-width dynemic-sidebar ".concat(S===x.Gr.SCHEDULE_TRAINING?"active":"")),children:[R.isOpen?(0,r.jsx)(I.Z,{element:(0,r.jsx)(ratings,{accountType:t,booking_id:R._id,onClose:()=>{handleAddRatingModelState({_id:null,isOpen:!1})},tabBook:g},R._id),isOpen:R.isOpen,id:R._id}):null,(0,r.jsx)("div",{children:t===x.Qm.TRAINER?(0,r.jsxs)(c.Fragment,{children:[(0,r.jsxs)("div",{className:"welcome-text mb-3",children:["Welcome, ",(0,r.jsx)("br",{})," ",d&&(null==d?void 0:d.fullname),(0,r.jsx)(eU.Z,{})]}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Fragment,{children:(0,r.jsx)("div",{className:"card rounded trainer-profile-card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-12 col-sm-6 col-md-5 col-lg-4 col-xl-3 d-flex justify-content-center align-items-center",children:(0,r.jsx)("img",{src:(null==d?void 0:d.profile_picture)||"/assets/images/avtar/user.png",alt:"trainer_image",className:"rounded trainer-profile",style:{maxWidth:"100%",height:"auto"}})}),(0,r.jsxs)("div",{className:"col-7 col-sm-6 col-md-7 col-lg-8 col-xl-9 card-trainer",children:[(0,r.jsxs)("h3",{className:"mt-3 ",children:["Hourly Rate: $",x.ND]}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{ratingRatio:l,totalRating:n}=y.c.getRatings(e);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:t,children:[(0,r.jsx)(P.Z,{color:"#FFC436",size:28,className:"star-container star-svg"}),(0,r.jsx)("p",{className:"ml-1 mt-1 mr-1 font-weight-light",children:l||0}),(0,r.jsxs)("p",{className:"mt-1",children:["(",n||0,")"]})]})})}([],"mt-3 d-flex ml-n2"),d&&d.extraInfo&&d.extraInfo.social_media_links&&d.extraInfo.social_media_links?(0,r.jsx)(M.Z,{profileImageURL:"",social_media_links:d.extraInfo.social_media_links,isvisible:!1}):null]})]})})})})}),(0,r.jsx)("h2",{className:"d-flex justify-content-center p-5",children:"Bookings"}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(c.Fragment,{children:(0,r.jsx)("div",{className:"card rounded",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)(_.Z,{tabs:!0,children:x.NT.map((e,t)=>(0,r.jsx)(C.Z,{children:(0,r.jsx)(w.Z,{className:"".concat(eW()({active:A===e})," ").concat(A===e?"text-primary":"text-dark"," text-capitalize"),onClick:()=>{toggle1(e),p(e)},style:{fontSize:"13px"},children:e})},"bookings_tabs".concat(t)))}),(0,r.jsx)(ex.Z,{activeTab:A,children:(0,r.jsx)(eg.Z,{tabId:g,children:k.length?Bookings():(0,r.jsxs)("h2",{className:"mb-2 mt-4 d-flex justify-content-center",children:["No ",g," sessions"]})})})]})})})})]}):null}),t===x.Qm.TRAINEE?k||k.length?(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)("h3",{className:"mt-2 p-3 mb-2 bg-primary text-white rounded",children:"Bookings"}),Bookings()]}):(0,r.jsx)("h2",{className:"d-flex  justify-content-center mt-4",children:"No Bookings available"}):null]}),(0,r.jsx)(I.Z,{isOpen:L,element:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container media-gallery portfolio-section grid-portfolio ",children:[(0,r.jsx)("div",{className:"theme-title",children:(0,r.jsx)("div",{className:"media",children:(0,r.jsx)("div",{className:"media-body media-body text-right",children:(0,r.jsxs)("div",{className:"icon-btn btn-sm btn-outline-light close-apps pointer",onClick:()=>{Z(!1)},children:[" ",(0,r.jsx)(T.Z,{})," "]})})})}),(0,r.jsxs)("div",{className:"d-flex flex-column  align-items-center",children:[(0,r.jsx)("h1",{className:"p-3",children:"Report"}),(0,r.jsx)("embed",{src:"https://netquix.s3.ap-south-1.amazonaws.com/".concat(H),width:"100%",height:"500px",allowfullscreen:!0})]}),(0,r.jsx)("div",{className:"justify-content-center"})]})})})]})},trainer_dashboard=e=>{let{accountType:t}=e;return(0,r.jsx)(bookings,{accountType:t})};l(88539),l(33089);var ez=l(54286),eQ=l(10201),scheduleInventory=()=>{let{status:e,scheduleInventoryData:t}=(0,h.CG)(eQ.g_),{handleSidebarTabClose:l}=W.bookingsAction,{isMobileFriendly:n,isSidebarToggleEnabled:i}=W.bookingsAction,{isLoading:s,configs:a}=(0,h.CG)(W.fG),o=(0,h.TL)(),[d,m]=(0,c.useState)(t),[u,v]=(0,c.useState)(!1);(0,c.useEffect)(()=>{fetchScheduleInventoryData()},[]),(0,c.useEffect)(()=>{m(t)},[e]);let fetchScheduleInventoryData=()=>{o((0,eQ.bl)())},x={start_time:"",end_time:"",error:!1,timeConflict:!1},handleStartTimeChange=(e,t,l,n,i)=>{let s=e?y.c.getFormattedDateDb(e):"",a=t[l].slots.some((e,t)=>t!==n&&s>=e.start_time&&s<=e.end_time),o=t[l].slots.map((e,t)=>t===n?{...e,start_time:s,error:e.end_time&&e.end_time<=s,timeConflict:a}:e),r=t.map((e,t)=>t===l?{...e,slots:o}:e);i(r)},handleEndTimeChange=(e,t,l,n,i)=>{let s=e?y.c.getFormattedDateDb(e):"",a=t[l].slots.map((e,t)=>t===n?{...e,end_time:s,error:e.start_time>=s}:e),o=t.map((e,t)=>t===l?{...e,slots:a}:e);i(o)},handleCheckIsError=e=>{let t=!1;return e.forEach(e=>{e.slots.forEach(e=>{(e.error||e.timeConflict)&&(t=!0)})}),v(t),t},handleAddSlotToDaySlots=(e,t,l)=>{let n=[...t[e].slots,x],i={...t[e],slots:n},s=t.map((t,l)=>l===e?t=i:t);l(s)},handleRemoveDaySlots=(e,t,l,n)=>{let i=l.map((l,n)=>{if(n===e){let e=l.slots.filter((e,l)=>l!==t);return{...l,slots:e}}return l});n(i)};return(0,r.jsxs)("div",{className:"bookings custom-scroll custom-sidebar-content-booking",onScroll:()=>{a.sidebar.isMobileMode&&o(i(!0))},children:[(0,r.jsx)("div",{id:"header",className:"header ml-3",children:(0,r.jsx)("h3",{className:"fs-1 p-3 mb-2 bg-primary text-white rounded",children:"Schedule Slots"})}),(0,r.jsx)("div",{id:"slots",className:"px-5 pt-3 m-25 pr-4",children:(0,r.jsx)(eH.J9,{initialValues:t,enableReinitialize:!0,onSubmit:e=>{let t=e.map(e=>({...e,slots:e.slots.filter(e=>e.start_time||e.end_time)})),l=y.c.checkTimeConflicts(t);l?R.Am.error("invalid form",{type:"error"}):o((0,eQ.rk)({available_slots:t}))},children:e=>{let{errors:l,touched:n,values:i,setValues:s}=e;return(0,r.jsxs)(eH.l0,{children:[i.map((e,t)=>{let{day:l,slots:n}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"row my-4 align-items-center",children:[(0,r.jsx)("div",{className:"col-12 col-md-2 text-capitalize mb-3 mb-md-0",children:(0,r.jsx)("h3",{children:l})}),(0,r.jsx)(eH.F2,{name:"slots",children:e=>{let{remove:l,push:a}=e;return(0,r.jsx)("div",{className:"col-12 col-md-10",children:n.map((e,l)=>(0,r.jsxs)("div",{className:"row mb-3",children:[(0,r.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-2 mb-md-0",children:(0,r.jsx)(ez.Z,{name:"startTime",className:"".concat(!0===(i[t].slots[l].error||i[t].slots[l].timeConflict)&&"border border-danger"),placeholder:"Select time",defaultValue:e.start_time&&y.c.getFormattedTime(e.start_time),showSecond:!1,minuteStep:5,use12Hours:!0,onChange:e=>handleStartTimeChange(e,i,t,l,s)})}),(0,r.jsx)("div",{className:"col-12 col-sm-6 col-md-4 mb-2 mb-md-0",children:(0,r.jsx)(ez.Z,{placeholder:"Select time",defaultValue:e.end_time&&y.c.getFormattedTime(e.end_time),className:"".concat(!0===i[t].slots[l].error&&"border border-danger"),showSecond:!1,minuteStep:5,use12Hours:!0,onChange:e=>handleEndTimeChange(e,i,t,l,s)})}),(0,r.jsxs)("div",{className:"col-12 col-sm-12 col-md-4 d-flex justify-content-center justify-content-md-start justify-content-sm-end slot",children:[0===l&&(0,r.jsx)("button",{className:"btn btn-circle bg-primary text-white me-2",type:"button",disabled:i[t].slots[l].timeConflict||i[t].slots[l].error,onClick:()=>handleAddSlotToDaySlots(t,i,s),children:(0,r.jsx)("i",{className:"fa fa-plus"})}),0!==l&&(0,r.jsx)("button",{className:"btn btn-circle bg-danger text-white",type:"button",onClick:()=>handleRemoveDaySlots(t,l,i,s),children:(0,r.jsx)("i",{className:"fa fa-minus"})})]})]},"".concat(l,"-key")))})}})]},t),(0,r.jsx)("hr",{className:"divider w-70 "})]},"schedule-inventory-".concat(t))})}),t.length&&(0,r.jsxs)("div",{className:"row mt-5 justify-content-end",children:[(0,r.jsx)("div",{className:"col-12"}),(0,r.jsx)("button",{disabled:handleCheckIsError(i),type:"submit",className:"submit-schedule-inventory btn btn-primary",children:"Submit Your Scheduling"})]})]})}})})]})},pages_dashboard=()=>{let e=(0,h.TL)(),{sidebarActiveTab:t}=(0,h.CG)(v.fD),[l,n]=(0,c.useState)("");(0,c.useEffect)(()=>{n(localStorage.getItem(x.dA.ACC_TYPE)),e((0,A.YI)())},[]);let getDashboard=()=>{switch(l){case x.Qm.TRAINEE:return(0,r.jsx)(dashboard,{});case x.Qm.TRAINER:return(0,r.jsx)(trainer_dashboard,{accountType:l})}},getScheduledInventory=()=>l===x.Qm.TRAINEE?(0,r.jsx)(bookings,{accountType:l}):(0,r.jsx)(scheduleInventory,{});return(0,r.jsx)(c.Fragment,{children:(0,r.jsx)($.J.Provider,{value:(0,$.h)(),children:(0,r.jsxs)("div",{className:"chitchat-container sidebar-toggle ".concat((x.Qm.TRAINEE,"")),children:[(0,r.jsx)(d.Z,{}),(()=>{switch(t){case x.Gr.CHATS:return(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(m.Z,{}),(0,r.jsx)(u.Z,{})]});case x.Gr.HOME:return getDashboard();case x.Gr.SCHEDULE_TRAINING:return getScheduledInventory()}})()]})})})}},33089:function(){},32949:function(){}},function(e){e.O(0,[7847,5443,1664,9290,1312,5340,8369,6066,8781,23,4047,1479,2683,4193,2276,9774,2888,179],function(){return e(e.s=98310)}),_N_E=e.O()}]);